<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120676613-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120676613-1');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Render targets</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Render targets </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#renderTargets_a">Binding</a><ul><li class="level2"><a href="#renderTargets_a_a">Advanced binding</a></li>
</ul>
</li>
<li class="level1"><a href="#renderTargets_b">Clearing</a></li>
<li class="level1"><a href="#renderTargets_c">Swapping</a></li>
</ul>
</div>
<div class="textblock"><p>Before we can actually render an object, we must also specify a render target which will serve as a surface to render the output to. We already covered render target creation in <a class="el" href="windows.html">Windows</a> and <a class="el" href="offscreen_rendering.html">Offscreen rendering</a> manuals. The only difference is that in those manuals we used a <b>Camera</b> component to set the target, and relied on the renderer to make use of it.</p>
<p>In this chapter we'll show how to manually bind a render target for rendering, as well as some other render target related operations.</p>
<h1><a class="anchor" id="renderTargets_a"></a>
Binding</h1>
<p>Use <a class="el" href="classbs_1_1ct_1_1_render_a_p_i.html#ace358e66fbeec1253cbd3211bbf1e2d1">ct::RenderAPI::setRenderTarget()</a> to bind a render target for rendering.</p>
<div class="fragment"><div class="line">SPtr&lt;RenderTarget&gt; target = ...; <span class="comment">// Create a RenderTexture or RenderWindow as described in earlier chapters</span></div><div class="line"></div><div class="line">RenderAPI&amp; rapi = RenderAPI::instance();</div><div class="line">rapi.setRenderTarget(target);</div></div><!-- fragment --><p>This will bind the entirety of the render target surface for rendering. If you just want to render to a portion of the target you can also call <a class="el" href="classbs_1_1ct_1_1_render_a_p_i.html#afd7a3caf480306534477ca6b8ff4574f">ct::RenderAPI::setViewport()</a>. It accepts a 2D rectangle whose coordinates should be in [0, 1] range and it specifies in which portion of the render target should rendering occurr.</p>
<div class="fragment"><div class="line"><span class="comment">// Render to the center of the render target, at 50% of its size</span></div><div class="line">RenderAPI&amp; rapi = RenderAPI::instance();</div><div class="line">rapi.setViewport(Rect2(0.25f, 0.25f, 0.5f, 0.5f));</div></div><!-- fragment --><h2><a class="anchor" id="renderTargets_a_a"></a>
Advanced binding</h2>
<p><b>ct::RenderAPI::setRenderTarget()</b> also has a couple of parameters to control more advanced behaviour:</p><ul>
<li><code>readOnlyFlags</code> - Combination of one or more elements of <a class="el" href="group___utility-_core.html#gaf0a824081bffd93f0f27ab43021d47a9">FrameBufferType</a> denoting which buffers will be bound for read-only operations. This is useful for depth or stencil buffers which need to be bound both for depth/stencil tests, as well as shader reads. If you don't specify this the render backend will assume you will be writing to the render target which will result in undefined behaviour if you also try reading from that same texture.</li>
<li><code>loadMask</code> - Mask described by <a class="el" href="group___utility-_core.html#ga478bdc4fbef2789a2dd04908714d05c0">RenderSurfaceMaskBits</a> which controls if current contents of any of the render target surfaces should be preserved. By default the system doesn't guarantee the contents will be preserved and data is instead undefined. In certain cases (like blending operations) you want to preserve the contents, in which case specify the necessary flags to tell the system which surfaces need their contents preserved.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Bind a render target with read-only depth/stencil, and preserve the existing contents of depth-stencil buffer on bind</span></div><div class="line">RenderAPI&amp; rapi = RenderAPI::instance();</div><div class="line">rapi.setRenderTarget(target, <a class="code" href="group___utility-_core.html#ggaf0a824081bffd93f0f27ab43021d47a9a592c65b5affe7cafa2fd5f257a344b59">FBT_DEPTH</a> | <a class="code" href="group___utility-_core.html#ggaf0a824081bffd93f0f27ab43021d47a9a55e4b057cadecf3141a37482dc6b2cf5">FBT_STENCIL</a>, RT_DEPTH_STENCIL);</div></div><!-- fragment --><h1><a class="anchor" id="renderTargets_b"></a>
Clearing</h1>
<p>Usually a render target will be re-used many times. Unless you are sure that every use will completely overwrite the render target contents, it can be beneficial (and in some cases necessary) to clear the render target to some value. Call <a class="el" href="classbs_1_1ct_1_1_render_a_p_i.html#aa322bfe6a30f71ec423e6f08c8734458">ct::RenderAPI::clearRenderTarget()</a> to clear the currently bound render target.</p>
<p>The first parameter represents a <b>FrameBufferType</b> of which portions of the target to clear. Second, third and fourth parameters represent the clear values for the color, depth and stencil surfaces, respectively. In case you want to clear only a specific color surface (in case they are multiple), you can use the fifth parameter as a bitmask of which color surfaces to clear.</p>
<div class="fragment"><div class="line"><span class="comment">// Clear color and depth surfaces. All color surfaces are cleared to blue color, while depth is cleared to the value of 1</span></div><div class="line">RenderAPI&amp; rapi = RenderAPI::instance();</div><div class="line">rapi.clearRenderTarget(<a class="code" href="group___utility-_core.html#ggaf0a824081bffd93f0f27ab43021d47a9a4b41abaaf8ad6ed0d1f5eab450c9b59d">FBT_COLOR</a> | <a class="code" href="group___utility-_core.html#ggaf0a824081bffd93f0f27ab43021d47a9a592c65b5affe7cafa2fd5f257a344b59">FBT_DEPTH</a>, Color::Blue, 1, 0, 0xFF);</div></div><!-- fragment --><p>You can also call <a class="el" href="classbs_1_1ct_1_1_render_a_p_i.html#aa18d21e36f2474fa6a76b27ab85124b0">ct::RenderAPI::clearViewport()</a> to clear only the viewport portion of the render target. The parameters are identical to <b>ct::RenderAPI::clearRenderTarget()</b>.</p>
<p>Clearing the depth buffer is especially important as the GPU will read its contents during rendering, and having old data in the depth buffer pretty much guarantees your rendering will not be valid.</p>
<h1><a class="anchor" id="renderTargets_c"></a>
Swapping</h1>
<p>If a render target is a <b>RenderWindow</b> you must call <a class="el" href="classbs_1_1ct_1_1_render_a_p_i.html#a0d047892af237e2bc3c3d0a73e2bb888">ct::RenderAPI::swapBuffers()</a> after rendering. This is because windows are usually double or triple buffered, meaning the rendering happens to a hidden buffer invisible to the user. When <b>ct::RenderAPI::swapBuffers()</b> is called this hidden buffer is presented to the user.</p>
<div class="fragment"><div class="line">SPtr&lt;RenderWindow&gt; window;</div><div class="line">rapi.setRenderTarget(window);</div><div class="line"></div><div class="line"><span class="comment">// ... draw something ...</span></div><div class="line"></div><div class="line">rapi.swapBuffers(window);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
