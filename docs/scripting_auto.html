<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Exposing code to script API (automated)</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='http://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="../SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="../SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Exposing code to script API (automated) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#scriptingAuto_a">Exporting classes</a><ul><li class="level2"><a href="#scriptingAuto_a_a">Renaming</a></li>
<li class="level2"><a href="#scriptingAuto_a_b">Visibility</a></li>
<li class="level2"><a href="#scriptingAuto_a_c">Exporting as properties</a></li>
<li class="level2"><a href="#scriptingAuto_a_d">Extending script interface further</a></li>
</ul>
</li>
<li class="level1"><a href="#scriptingAuto_b">Exporting structures</a></li>
<li class="level1"><a href="#scriptingAuto_c">Exporting enums</a><ul><li class="level2"><a href="#scriptingAuto_c_a">Excluding enum entries</a></li>
<li class="level2"><a href="#scriptingAuto_c_b">Renaming enum entries</a></li>
</ul>
</li>
<li class="level1"><a href="#scriptingAuto_d">Exporting comments</a></li>
<li class="level1"><a href="#scriptingAuto_e">External methods</a></li>
<li class="level1"><a href="#scriptingAuto_f">Running the code generator</a></li>
</ul>
</div>
<div class="textblock"><p>When you've added a new feature, system or just extended existing ones you might want to expose that functionality to the scripting API. bs::f makes this process easier through its automated script binding generator tool. All you need to do is to decorate the C++ types and methods you wish to export and run the tool. The tool is ran automatically whenever you build through CMake if <em>GENERATE_SCRIPT_BINDINGS</em> option is turned on.</p>
<p><b>BS_SCRIPT_EXPORT</b> macro supports a variety of parameters used for customizing how will the type/method be exported.</p>
<h1><a class="anchor" id="scriptingAuto_a"></a>
Exporting classes</h1>
<p>In order to export a class to script code you need to decorate the class and one or multiple methods with <b>BS_SCRIPT_EXPORT</b> macro.</p>
<div class="fragment"><div class="line"><span class="comment">// Decorate the class and the methods with BS_SCRIPT_EXPORT modifier</span></div><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT() MyClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    MyClass(); <span class="comment">// Constructor</span></div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    UINT32 getSomeData();</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script interface (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">partial class </span>MyClass : ScriptObject</div><div class="line">{</div><div class="line">    <span class="keyword">public</span> MyClass() { ... }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> getSomeData() { ... }</div><div class="line">}</div></div><!-- fragment --><p>There are a few important rules when using <b>BS_SCRIPT_EXPORT</b>:</p><ul>
<li>It CAN be used on non-templated classes or structs, as well as <b>Resource</b>s and <b>Component</b>s</li>
<li>It CANNOT be used on templated classes or structs</li>
<li>It CAN be used on public constructors and non-templated methods</li>
<li>It CANNOT be used on destructors, operators, templated methods or private/protected methods of any kind</li>
</ul>
<p>If you do not respect these rules the code generation will either fail, or the generated code will be invalid and will fail to compile.</p>
<p>There are also limitations on the types of parameters and return values the exported methods are allowed to have:</p><ul>
<li><b>Resource</b>s and <b>Component</b>s must be passed as handles (e.g. <b>HMesh</b>, <b>HRenderable</b>)</li>
<li>Other classes must be passed as shared pointers (e.g. <b>SPtr&lt;MyClass&gt;</b>)</li>
<li>Plain types such as <b>int</b>, <b>float</b> or types we'll describe below can be passed directly (e.g. <b>int</b>)</li>
<li>If a parameter is used as input it is beneficial to decorate it as a constant reference or a pointer (e.g. <em>const HMesh&amp;</em>)</li>
<li>If a parameter is used as output it is beneficial to decorate it as a non-constant reference or a pointer (e.g. <em>HMesh&amp;</em>)</li>
<li>If a parameter is an array, it must be of type <b>Vector</b> (e.g. <em>Vector&lt;HMesh&gt;</em> or <em>Vector&lt;SPtr&lt;MyClass&gt;&gt;</em>)</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT() MyOtherClass</div><div class="line">{</div><div class="line">   ...</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// Examples of some valid exported methods</span></div><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT() MyClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    MyClass(); <span class="comment">// Constructor</span></div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    UINT32 getPlainType();</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> getPlainTypeAsParam(UINT32&amp; output);   </div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> setPlainType(UINT32 value);    </div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> getString();</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> setString(const <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a>&amp; value);    </div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    HMesh getResource();</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> setResource(const HMesh&amp; mesh);</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    HRenderable getComponent();</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> setComponent(const HRenderable&amp; renderable);</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <a class="code" href="group___memory.html#ga5076b1659821c8d7ce06da09452ba382">SPtr</a>&lt;MyOtherClass&gt; getNormalObject();</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> setNormalObject(const <a class="code" href="group___memory.html#ga5076b1659821c8d7ce06da09452ba382">SPtr</a>&lt;MyOtherClass&gt;&amp; value);</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <a class="code" href="group___containers.html#ga7eff25c8c62ee478cb8e5909eb8c2c46">Vector</a>&lt;HMesh&gt; getArray(); <span class="comment">// HMesh could have also been a normal class or a component</span></div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT()</div><div class="line">    <span class="keywordtype">void</span> setArray(const <a class="code" href="group___containers.html#ga7eff25c8c62ee478cb8e5909eb8c2c46">Vector</a>&lt;HMesh&gt;&amp; value); <span class="comment">// HMesh could have also been a normal class or a component</span></div><div class="line">};</div></div><!-- fragment --><h2><a class="anchor" id="scriptingAuto_a_a"></a>
Renaming</h2>
<p><b>BS_SCRIPT_EXPORT</b> accepts a variety of comma separated parameters in the format "param1:value1,param2:value2". Parameter named "n" allows you to specify a different name for a type or a method, so when exported it uses the specified name rather than the same name as in C++.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT(n:MyRenamedClass) MyClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    BS_SCRIPT_EXPORT(n:GetSomeData)</div><div class="line">    UINT32 getSomeData();</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script interface (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">partial class </span>MyRenamedClass : ScriptObject</div><div class="line">{</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> GetSomeData() { ... }</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="scriptingAuto_a_b"></a>
Visibility</h2>
<p>You can make a type or a method <em>public</em>, <em>internal</em> or <em>private</em> by specifying the "v" parameter. Accepted values are "public", "internal" and "private". By default all types and methods are public.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT() MyClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">// Exported as a private method</span></div><div class="line">    BS_SCRIPT_EXPORT(n:GetSomeData,v:<span class="keyword">private</span>)</div><div class="line">    UINT32 getSomeData();</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script interface (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">partial class </span>MyRenamedClass : ScriptObject</div><div class="line">{</div><div class="line">    <span class="keyword">private</span> <span class="keywordtype">int</span> GetSomeData() { ... }</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="scriptingAuto_a_c"></a>
Exporting as properties</h2>
<p>Parameter named "pr" allows you to specify that a method should be exported as a property. The supported values for the parameter are "getter" or "setter". When exposing a method as a property the name ("n") parameter is required and should be the name of the property.</p>
<div class="fragment"><div class="line"><span class="comment">// Decorate the class and the methods with BS_SCRIPT_EXPORT modifier</span></div><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT() MyClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    BS_SCRIPT_EXPORT(pr:getter,n:SomeData)</div><div class="line">    UINT32 getSomeData();</div><div class="line"></div><div class="line">    BS_SCRIPT_EXPORT(pr:setter,n:SomeData)</div><div class="line">    <span class="keywordtype">void</span> setSomeData(UINT32 value);</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script interface (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">partial class </span>MyClass : ScriptObject</div><div class="line">{</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> SomeData</div><div class="line">    {</div><div class="line">        <span class="keyword">get</span> { ... }</div><div class="line">        <span class="keyword">set</span> { ... }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>You are allowed to provide only getter, only setter, or both. Providing multiple getters or setters for the propery with the same name results in undefined behaviour.</p>
<p>Getter/setter methods must follow a specific template otherwise they will be ignored during generation:</p><ul>
<li>Getter method must return a non-void value, and have no parameters</li>
<li>Setter method must not have a return value and a single parameter</li>
<li>Getter return value and setter parameter types must match</li>
</ul>
<h2><a class="anchor" id="scriptingAuto_a_d"></a>
Extending script interface further</h2>
<p>Sometimes automatic code generation just isn't good enough. For that reason all exported C# classes are marked with the <em>partial</em> keyword, meaning you can extend their interface with manually written code in a separate file, as required.</p>
<h1><a class="anchor" id="scriptingAuto_b"></a>
Exporting structures</h1>
<p>A data type can be exported as a C# <em>struct</em> by using the "pl" parameter, accepting values "true" or "false" (default being false). When exported all of the fields of the data type will be exported as a C# <em>struct</em>. Any constructors will also be exported, but no other methods. This is meant to be used on simple types that will be used for passing data around. Such types are passed by value and will be copied when crossing the C++/C# boundary.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>BS_SCRIPT_EXPORT(pl:true) Volume</div><div class="line">{</div><div class="line">    Volume()</div><div class="line">        : left(0), top(0), right(1), bottom(1), front(0), back(1)</div><div class="line">    { }</div><div class="line"></div><div class="line">    Volume(UINT32 left, UINT32 top, UINT32 right, UINT32 bottom):</div><div class="line">        left(left), top(top), right(right), bottom(bottom), front(0), back(1)</div><div class="line">    { }</div><div class="line"></div><div class="line">    Volume(UINT32 left, UINT32 top, UINT32 front, UINT32 right, UINT32 bottom, UINT32 back):</div><div class="line">        left(left), top(top), right(right), bottom(bottom), front(front), back(back)</div><div class="line">    { }</div><div class="line"></div><div class="line">    UINT32 left, top, right, bottom, front, back;</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script code (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> partial <span class="keyword">struct </span>Volume</div><div class="line">{</div><div class="line">    <span class="comment">// C# doesn&#39;t support parameterless struct constructors, and therefore a static Default() method is generated instead</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Volume <a class="code" href="group___resources.html#gga24c5b7027e3c55f3e940f269cf805fd1a7a1920d61156abc05a60135aefe8bc67">Default</a>()</div><div class="line">    {</div><div class="line">        Volume value = <span class="keyword">new</span> Volume();</div><div class="line">        value.left = 0;</div><div class="line">        value.top = 0;</div><div class="line">        value.right = 1;</div><div class="line">        value.bottom = 1;</div><div class="line">        value.front = 0;</div><div class="line">        value.back = 1;</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> value;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> Volume(<span class="keywordtype">int</span> left, <span class="keywordtype">int</span> top, <span class="keywordtype">int</span> right, <span class="keywordtype">int</span> bottom)</div><div class="line">    {</div><div class="line">        this.left = left;</div><div class="line">        this.top = top;</div><div class="line">        this.right = right;</div><div class="line">        this.bottom = bottom;</div><div class="line">        this.front = 0;</div><div class="line">        this.back = 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> Volume(<span class="keywordtype">int</span> left, <span class="keywordtype">int</span> top, <span class="keywordtype">int</span> front, <span class="keywordtype">int</span> right, <span class="keywordtype">int</span> bottom, <span class="keywordtype">int</span> back)</div><div class="line">    {</div><div class="line">        this.left = left;</div><div class="line">        this.top = top;</div><div class="line">        this.right = right;</div><div class="line">        this.bottom = bottom;</div><div class="line">        this.front = front;</div><div class="line">        this.back = back;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> left;</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> top;</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> right;</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> bottom;</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> front;</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span> back;</div><div class="line">}</div></div><!-- fragment --><p>Note when generating constructors the system is only able to parse class member initializers and constructor initializers defined in the header file and will ignore any in the .cpp file.</p>
<p>Structs support rename &amp; visibility parameters same as normal class export.</p>
<h1><a class="anchor" id="scriptingAuto_c"></a>
Exporting enums</h1>
<p>Enums can be exported with no additional parameters, just by specifying <b>BS_SCRIPT_EXPORT</b>.</p>
<div class="fragment"><div class="line"><span class="keyword">enum</span> BS_SCRIPT_EXPORT() class MyEnum</div><div class="line">{</div><div class="line">    Value1 = 1,</div><div class="line">    Value2 = 10,</div><div class="line">    Value3 = 100</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script code (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MyEnum</div><div class="line">{</div><div class="line">    Value1 = 1,</div><div class="line">    Value2 = 10,</div><div class="line">    Value3 = 100</div><div class="line">}</div></div><!-- fragment --><p>Enums support rename &amp; visibility parameters same as normal class and struct export.</p>
<h2><a class="anchor" id="scriptingAuto_c_a"></a>
Excluding enum entries</h2>
<p>By default when exporting enums all of their entries will be exported. You can ignore a certain enum entry by using the "ex" parameter. Supported values are "true" or "false".</p>
<div class="fragment"><div class="line"><span class="comment">// Exclude the third enum entry from script code</span></div><div class="line"><span class="keyword">enum</span> BS_SCRIPT_EXPORT() class MyEnum</div><div class="line">{</div><div class="line">    Value1                                      = 1,</div><div class="line">    Value2                                      = 10,</div><div class="line">    Value3      BS_SCRIPT_EXPORT(ex:<span class="keyword">true</span>)       = 100</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script code (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MyEnum</div><div class="line">{</div><div class="line">    Value1 = 1,</div><div class="line">    Value2 = 10,</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="scriptingAuto_c_b"></a>
Renaming enum entries</h2>
<p>Individual enum entries can also be renamed using the "n" parameter.</p>
<div class="fragment"><div class="line"><span class="keyword">enum</span> BS_SCRIPT_EXPORT() MyEnum</div><div class="line">{</div><div class="line">    ME_VAL1     BS_SCRIPT_EXPORT(n:Value1)      = 1,</div><div class="line">    ME_VAL2     BS_SCRIPT_EXPORT(n:Value2)      = 10,</div><div class="line">    ME_VAL3     BS_SCRIPT_EXPORT(n:Value3)      = 100</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script code (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> MyEnum</div><div class="line">{</div><div class="line">    Value1 = 1,</div><div class="line">    Value2 = 10,</div><div class="line">    Value3 = 100</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="scriptingAuto_d"></a>
Exporting comments</h1>
<p>All Javadoc-type comments on exported types and methods will automatically be parsed, converted to XML documentation format and exported to script code.</p>
<h1><a class="anchor" id="scriptingAuto_e"></a>
External methods</h1>
<p>Sometimes the C++ interface just isn't suitable for export to script code as-is. Sometimes you want to make the script code more streamlined and higher level, without modifying the existing C++ interface. Other times the method parameters or return values don't fit the requirements we stated above.</p>
<p>External methods allow you to extend functionality of some class, <b>Resource</b> or a <b>Component</b> by defining static methods which are then exported as if they were part of the original class. Note these types of methods are not relevant for struct or enum export.</p>
<p>Use the "e" parameter to mark a method as external. Value of the parameter should be the name of the class it is extending. Use the "ec" parameter to mark a constructor as external. Value of the parameter should be the name of the class it is extending.</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>MY_CLASS_DESC</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> val1;</div><div class="line">    <span class="keywordtype">float</span> val2;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Some class we&#39;re exporting normally</span></div><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT() MyClass</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MyClass(<span class="keyword">const</span> MY_CLASS_DESC&amp; desc);</div><div class="line"></div><div class="line">    UINT32* getArrayData(UINT32&amp; count) <span class="keyword">const</span>;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// Extension class for MyClass</span></div><div class="line"><span class="keyword">class </span>BS_SCRIPT_EXPORT(e:MyClass) MyClassEx</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">// External constructor because we don&#39;t want to expose MY_CLASS_DESC to script code</span></div><div class="line">    BS_SCRIPT_EXPORT(ec:MyClass)</div><div class="line">    <span class="keyword">static</span> SPtr&lt;MyClass&gt; create(<span class="keywordtype">int</span> val1, <span class="keywordtype">float</span> val2)</div><div class="line">    {</div><div class="line">        MY_CLASS_DESC desc;</div><div class="line">        desc.val1 = val1;</div><div class="line">        desc.val2 = val2;</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> bs_shared_ptr_new&lt;MyClass&gt;(desc);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// External method because MyClass returns an array in raw form, but we need it in a Vector</span></div><div class="line">    BS_SCRIPT_EXPORT(e:MyClass)</div><div class="line">    <span class="keyword">static</span> UINT32 getArrayData(<span class="keyword">const</span> SPtr&lt;MyClass&gt;&amp; thisPtr)</div><div class="line">    {</div><div class="line">        UINT32 numEntries;</div><div class="line">        UINT32* entries = thisPtr-&gt;getArrayData(numEntries);</div><div class="line"></div><div class="line">        Vector&lt;UINT32&gt; output;</div><div class="line">        <span class="keywordflow">for</span>(UINT32 i = 0; i &lt; numEntries; i++)</div><div class="line">            output.push_back(entries[i]);</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> output;</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><p>The example above results in the following script interface (C#): </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">partial class </span>MyClass : ScriptObject</div><div class="line">{</div><div class="line">    <span class="keyword">public</span> MyClass(<span class="keywordtype">int</span> val1, <span class="keywordtype">float</span> val2) { ... }</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">int</span>[] getArrayData() { ... }</div><div class="line">}</div></div><!-- fragment --><p>External methods must follow these rules:</p><ul>
<li>They must be part of a class that is also exported and marked with the "e" parameter</li>
<li>They must be static</li>
<li>External constructors must return a value of the type they're external to</li>
<li>External methods must accept the type they're external to as the first parameter</li>
</ul>
<h1><a class="anchor" id="scriptingAuto_f"></a>
Running the code generator</h1>
<p>Once you have decorated the C++ classes with necessary export parameters you can run the code generator simply by enabling <em>GENERATE_SCRIPT_BINDINGS</em> and regenerating the CMake build. The generator will run automatically over all bs::f code and generate relevant script code. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
