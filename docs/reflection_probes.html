<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120676613-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120676613-1');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Reflection environment</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Reflection environment </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#reflectionProbes_a">Reflection probes</a><ul><li class="level2"><a href="#reflectionProbes_a_a">Generating reflection probes</a></li>
<li class="level2"><a href="#reflectionProbes_a_b">Using external textures</a></li>
<li class="level2"><a href="#reflectionProbes_a_c">Reflection probe interpolation</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Setting up a valid reflection environment is essential for all types of physically based materials. The environment ensures that the specular reflections on the materials correctly reflect the surroundings.</p>
<p>TODO_IMAGE</p>
<p>A <b>Skybox</b> is one such example of a reflection environment. When one is present all materials will reflect the image displayed by the skybox. This is generally fine for open outdoor areas, but when the camera is indoors you don't want the indoor surfaces to reflect the sky. This is where <a class="el" href="classbs_1_1_c_reflection_probe.html">ReflectionProbe</a> component comes into play.</p>
<h1><a class="anchor" id="reflectionProbes_a"></a>
Reflection probes</h1>
<p>While the skybox is used to provide outdoor reflections, reflection probes are used to create reflection cubemaps for indoor environments. Reflection probes have an origin and a radius of influence. Reflection probes also use HDR cubemaps, but instead of using external textures those cubemaps are generated in-engine, at the position of the reflection probe. They are represented using the <b>ReflectionProbe</b> component.</p>
<div class="fragment"><div class="line">HSceneObject reflProbeSO = SceneObject::create(<span class="stringliteral">&quot;Refl. probe&quot;</span>);</div><div class="line">HReflectionProbe reflProbe = reflProbeSO-&gt;addComponent&lt;CReflectionProbe&gt;();</div></div><!-- fragment --><p>You must provide the extents of the geometry covered by the reflection probe. These extents serve both to determine a range of influence, and to approximate the surrounding geometry. For example if you are placing a reflection probe that covers a room, you should strive to match the reflection probe extents with the room walls. In practice you'll want to tweak it to what looks best.</p>
<p>You can assign extents in two ways, depending on reflection probe type:</p><ul>
<li>ReflectionProbeType::Box - Reflection probe is represented by a box and extents are set by calling <a class="el" href="classbs_1_1_c_reflection_probe.html#a21ebf68eccf6f6d879fe2d876d0a0698">CReflectionProbe::setExtents()</a>.</li>
<li><a class="el" href="group___renderer-_internal.html#gga8c082c4504173be0d18e62c5f403e4edab7095f057db3fefa7325ad93a04e14fd">ReflectionProbeType::Sphere</a> - Reflection probe is represented by a sphere an extents are set by calling <a class="el" href="classbs_1_1_c_reflection_probe.html#ad1306b95597699789cd9d1eeb89623ce">CReflectionProbe::setRadius()</a>.</li>
</ul>
<p>You can change the type of the reflection probe (and therefore extents) by calling <a class="el" href="classbs_1_1_c_reflection_probe.html#a01d92bd770bc5476bb7f9cd892bd3832">CReflectionProbe::setType()</a>.</p>
<div class="fragment"><div class="line">reflProbe-&gt;setType(ReflectionProbeType::Box);</div><div class="line">reflProbe-&gt;setExtents(Vector3(2.0f, 2.0f, 2.0f));</div></div><!-- fragment --><h2><a class="anchor" id="reflectionProbes_a_a"></a>
Generating reflection probes</h2>
<p>Reflection probe cubemap will be generated automatically when the reflection probe is first added to the scene, and whenever it is moved. You can also force the cubemap to regenerate by calling <a class="el" href="classbs_1_1_c_reflection_probe.html#aa9ba65f106eb8af6c756969ff9dff928">CReflectionProbe::capture()</a>. This is required when surrounding geometry changes and you wish to update the probe cubemap.</p>
<div class="fragment"><div class="line">reflProbe-&gt;capture();</div></div><!-- fragment --><h2><a class="anchor" id="reflectionProbes_a_b"></a>
Using external textures</h2>
<p>In case you want to use an external HDR texture, similar to a skybox, you can call <a class="el" href="classbs_1_1_c_reflection_probe.html#a84ce182ab36ac0789bd42a0916e4cff4">CReflectionProbe::setCustomTexture()</a>. The system will no longer use the automatically generated cubemap and use the provided one instead. If you wish to switch back to the automatic generator, call the method with a null value.</p>
<div class="fragment"><div class="line">HTexture myCubemap = ...;</div><div class="line"></div><div class="line">reflProbe-&gt;setCustomTexture(myCubemap);</div></div><!-- fragment --><h2><a class="anchor" id="reflectionProbes_a_c"></a>
Reflection probe interpolation</h2>
<p>When multiple reflection probes overlap the system will blend between the reflection probes based on the distance from the origin and the probe extents. If system can't blend with other reflection probes it will instead blend with the sky. This means in most cases you want to ensure that reflection probes overlap, in order to provide clean transitions. When the camera is outside the influence of any reflection probes the sky reflections will be used instead. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
