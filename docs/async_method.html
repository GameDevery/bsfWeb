<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Core thread asynchronous methods</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='http://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="../SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="../SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Core thread asynchronous methods </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This type of method doesn't execute immediately when called. Instead it is queued for execution and will be executed when the current frame ends. These methods generally need to perform some kind of communication between the main and core (rendering) threads, making direct calls impossible.</p>
<p>You can force the core thread to start executing queued methods before the end of the current frame, by calling <a class="el" href="classbs_1_1_core_thread.html#adc11201d6f042139d7c873247134cbe8">CoreThread::submit()</a>. This guarantees the commands will start executing, but doesn't guarantee they will finish, as it might take the core thread some time to process all queued commands.</p>
<p>If you wish to wait until your command finishes executing then set <code>blockUntilComplete</code> parameter of <b>CoreThread::submit()</b> to true.</p>
<p>An example that reads the texture data from the GPU: </p><div class="fragment"><div class="line">SPtr&lt;Texture&gt; texture = ... some texture we created earlier ...;</div><div class="line">SPtr&lt;PixelData&gt; output = ... buffer to receive the data ...;</div><div class="line">texture-&gt;readData(output);</div><div class="line"></div><div class="line"><span class="comment">// Assuming we need the data right away, we submit the </span></div><div class="line"><span class="comment">// core thread queue and block until the command executes</span></div><div class="line"><a class="code" href="group___core_thread-_internal.html#gaef7ed693951fb3ecc75209447cf4dc63">gCoreThread</a>().<a class="code" href="classbs_1_1_core_thread.html#adc11201d6f042139d7c873247134cbe8">submit</a>(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="comment">// It&#39;s now safe to read the pixel data</span></div><div class="line">Color color = output-&gt;getColorAt(0, 0);</div></div><!-- fragment --><p>Optionally, if the method returns an <a class="el" href="classbs_1_1_async_op.html">AsyncOp</a> object, you can call <a class="el" href="classbs_1_1_async_op.html#a866e1900329b268bab8087e65454a31e">AsyncOp::blockUntilComplete()</a> for the same result. However you must ensure that you don't call it before <b>CoreThread::submit()</b> has been called, otherwise the calling thread might deadlock as it waits for the operations to finish, even though it was never started.</p>
<p>If the method provides a return value, you can use the provided <b>AsyncOp</b> object to retrieve it using <a class="el" href="classbs_1_1_async_op.html#a9e6d5f8ad78ee7b40ef84c244363840a">AsyncOp::getReturnValue&lt;T&gt;()</a>. Calling this is only valid if <a class="el" href="classbs_1_1_async_op.html#ac3a550a59c5a73ae84db8eba5c74c2e3">AsyncOp::hasCompleted()</a> returns true. Return value is always available after you blocked using either of the ways mentioned above.</p>
<p>Note that blocking is a very expensive operation and should not be done in performance critical code. If you need to wait until an async method completes, it is preferable to keep querying <b>AsyncOp::hasCompleted()</b> and do something else until it returns true.</p>
<p>If you wish to learn more about how core thread works, visit the <a class="el" href="core_thread.html">core thread manual</a>. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
