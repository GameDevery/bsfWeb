<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120676613-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120676613-1');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Materials</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Materials </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#simpleMaterial_a">Retrieving a shader</a></li>
<li class="level1"><a href="#simpleMaterial_b">Material creation</a></li>
<li class="level1"><a href="#simpleMaterial_c">Setting parameters</a><ul><li class="level2"><a href="#simpleMaterial_c_a">Sampler states</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>Materials are resources that control how are meshes rendered. They are represented using the <a class="el" href="classbs_1_1_material.html">Material</a> class. Each material must have one <a class="el" href="classbs_1_1_shader.html">Shader</a> object, and zero or more parameters.</p>
<p>A shader is a set of GPU programs and render states that tell the GPU how is a mesh meant to be rendered. Generally these GPU programs have parameters that can control what they output (for example, which texture to use). A material allows you to set those parameters. You can think of shaders as templates, and materials as instances of shaders - similar as you would think of a <em>class</em> vs. <em>object</em> relationship in a programming language.</p>
<h1><a class="anchor" id="simpleMaterial_a"></a>
Retrieving a shader</h1>
<p>Before we can create a material we first need to pick a shader to use as a basis. bs::f allows you to create fully custom shaders, but this is an advanced topic and is left for a later chapter. For the majority of purposes when rendering 3D geometry you can use either of the following two shaders:</p><ul>
<li>Standard - Physically based shader for opaque 3D geometry</li>
<li>Transparent - Physically based shader for transparent 3D geometry</li>
</ul>
<p>Both of those shaders can be accessed through <a class="el" href="classbs_1_1_builtin_resources.html#a07abbca355bd9fec461379c4fd719164">BuiltinResources::getBuiltinShader()</a> using the values <a class="el" href="group___resources-_engine.html#gga9b71a8c32177151897dbd5c41882e7baaeb6d8ae6f20283755b339c0dc273988b">BuiltinShader::Standard</a> and BuiltinShader::Transparent respectively.</p>
<div class="fragment"><div class="line"><span class="comment">// Get the standard PBR shader</span></div><div class="line">HShader shader = BuiltinResources::instance().getBuiltinShader(BuiltinShader::Standard);</div></div><!-- fragment --><p>Both of these shaders provide physically based shading and expect four different parameters (see below on how to set parameters):</p><ul>
<li><b>gAlbedoTex</b> - RGBA texture representing the color of the object's surface. If using the transparent shader, alpha channel determines the amount of transparency.</li>
<li><b>gNormalTex</b> - Normal map (texture containing surface normals encoded into RGB channels)</li>
<li><b>gRoughnessTex</b> - 1D texture that determines the roughness of the surface. Values closer to 1 mean a more rough (less reflective) surface, while values closer to 0 mean less rough (more reflective, mirror like) surface.</li>
<li><b>gMetalnessTex</b> - 1D texture that determines if the part of the surface is a metal or a dieletric. This texture should only generally contain values 1 (metal) or 0 (dieletric). Metal surfaces are reflective reflective while dieletric ones are not.</li>
</ul>
<p>At minimum you need to provide the albedo texture, while others can be left as default (or be assigned pure white, or pure black textures) if not required.</p>
<h1><a class="anchor" id="simpleMaterial_b"></a>
Material creation</h1>
<p>To create a material use the <a class="el" href="classbs_1_1_material.html#a7e5bea3f6cd2f37ff84d1548d4dd578a">Material::create()</a> method, which expects a <b>Shader</b> as a parameter.</p>
<div class="fragment"><div class="line"><span class="comment">// Create a material based on the shader we retrieved above</span></div><div class="line">HMaterial material = Material::create(shader);</div></div><!-- fragment --><h1><a class="anchor" id="simpleMaterial_c"></a>
Setting parameters</h1>
<p>As we mentioned, the main purpose of a material is to provide a way to set various parameters exposed by the shader. In the example below we show how to set the albedo texture parameter.</p>
<div class="fragment"><div class="line">HTexture texture = <a class="code" href="group___importer.html#gafda9808bfcae11afa60eee731056225e">gImporter</a>().<a class="code" href="classbs_1_1_importer.html#a956425fa45716612e04b109701bdd62f">import</a>&lt;Texture&gt;(<span class="stringliteral">&quot;myTexture.png&quot;</span>);</div><div class="line"></div><div class="line"><span class="comment">// Set the texture for the &quot;gAlbedoTex&quot; parameter.</span></div><div class="line">material-&gt;setTexture(<span class="stringliteral">&quot;gAlbedoTex&quot;</span>, texture);</div></div><!-- fragment --><p>After the texture has been set, anything rendered with that material will now have that particular texture applied. Different shaders will accept different parameters of different types.</p>
<p>In this particular example we have a parameter named "gAlbedoTex" that accepts a <b>Texture</b> resource. We set such a parameter by calling <a class="el" href="classbs_1_1_t_material.html#a9ad49a50506ffb45b02343bc021047fe">Material::setTexture()</a>. There are other parameter types like floats, ints, colors, as well as multi-dimensional types like vectors and matrices which can be set by calling <a class="el" href="classbs_1_1_t_material.html#ac0dfa1b5ca5cca9a5feda6657c531b6d">Material::setFloat()</a>, <a class="el" href="classbs_1_1_t_material.html#ae9917c5f5467303d2f733f84ebc5c1fd">Material::setColor()</a>, <a class="el" href="classbs_1_1_t_material.html#a2bb6607097658e67d9901d7213ca6005">Material::setVec4()</a> and similar.</p>
<div class="fragment"><div class="line"><span class="comment">// Assuming our material has some more parameters, for purposes of the example</span></div><div class="line">material-&gt;setColor(<span class="stringliteral">&quot;color&quot;</span>, Color::White);</div><div class="line">material-&gt;setFloat(<span class="stringliteral">&quot;time&quot;</span>, 30.0f);</div><div class="line">material-&gt;setVec3(<span class="stringliteral">&quot;position&quot;</span>, Vector3(0, 15.0f, 10.0f));</div><div class="line">material-&gt;setMat4(<span class="stringliteral">&quot;someTransform&quot;</span>, Matrix4::IDENTITY);</div></div><!-- fragment --><h2><a class="anchor" id="simpleMaterial_c_a"></a>
Sampler states</h2>
<p>Sampler states are a special type of parameters that can be set by calling <a class="el" href="classbs_1_1_t_material.html#a5a000010e2520587c1f86e725c06922d">Material::setSamplerState()</a>. These states are used to control how is a texture read in a shader. For example they control what type of filtering to use, how to handle out of range texture coordinates and similar. In most cases you don't need to set sampler states as the default one should be adequate.</p>
<p>Sampler states are created by calling <a class="el" href="classbs_1_1_sampler_state.html#a9b2ecfa8408cf6c2510fcdb941a16761">SamplerState::create()</a>, while previously filling out the <a class="el" href="structbs_1_1_s_a_m_p_l_e_r___s_t_a_t_e___d_e_s_c.html">SAMPLER_STATE_DESC</a> structure.</p>
<p>As an example, lets set up a sampler state that enables trilinear filtering for a texture using it, and then assign it to a material.</p>
<div class="fragment"><div class="line">SAMPLER_STATE_DESC desc;</div><div class="line">desc.minFilter = <a class="code" href="group___utility-_core.html#gga7f1dfeea870eec2a3f18186ad02bc817ac8aa88010a2efca3f6f2a9d3cf6d3d5c">FO_LINEAR</a>;</div><div class="line">desc.magFilter = <a class="code" href="group___utility-_core.html#gga7f1dfeea870eec2a3f18186ad02bc817ac8aa88010a2efca3f6f2a9d3cf6d3d5c">FO_LINEAR</a>;</div><div class="line">desc.mipFilter = <a class="code" href="group___utility-_core.html#gga7f1dfeea870eec2a3f18186ad02bc817ac8aa88010a2efca3f6f2a9d3cf6d3d5c">FO_LINEAR</a>;</div><div class="line"></div><div class="line">SPtr&lt;SamplerState&gt; samplerState = SamplerState::create(desc);</div><div class="line"></div><div class="line"><span class="comment">// &quot;gAlbedoSamp&quot; is a sampler state parameter provided by the standard shader we</span></div><div class="line"><span class="comment">// used in the example above. It controls options for the texture set on the gAlbedoTex</span></div><div class="line"><span class="comment">// parameter.</span></div><div class="line">material-&gt;setSamplerState(<span class="stringliteral">&quot;gAlbedoSamp&quot;</span>, samplerState);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
