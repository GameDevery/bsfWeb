<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Character controller</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='http://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="../SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="../SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Character controller </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#characterController_a">Shape</a></li>
<li class="level1"><a href="#characterController_b">Movement</a></li>
<li class="level1"><a href="#characterController_c">Slopes</a></li>
<li class="level1"><a href="#characterController_d">Steps</a></li>
<li class="level1"><a href="#characterController_e">Events</a></li>
</ul>
</div>
<div class="textblock"><p>Character controller is a special type of a dynamic physics objects that is intended to be used primarily for the movement of the user-controller character in your game. Although you could simulate your character using a rigidbody, it is usually preferable to use the character controller due to various specific functionality it offers.</p>
<p>It is represented using the <a class="el" href="classbs_1_1_c_character_controller.html">CharacterController</a> component.</p>
<div class="fragment"><div class="line">HSceneObject controllerSO = SceneObject::create(<span class="stringliteral">&quot;Rigidbody&quot;</span>);</div><div class="line">HCharacterController charController = controllerSO-&gt;addComponent&lt;CCharacterController&gt;();</div></div><!-- fragment --><h1><a class="anchor" id="characterController_a"></a>
Shape</h1>
<p>Similar to a rigidbody, the controller requires a shape to represent its surface. This shape is always a capsule, and you can control the size and orientation of it using the following methods:</p><ul>
<li><a class="el" href="classbs_1_1_c_character_controller.html#a1cae8173a27f7a029a6610975b5e5cbc">CCharacterController::setHeight()</a> - Sets the length of the line going along the center of the capsule.</li>
<li><a class="el" href="classbs_1_1_c_character_controller.html#ad1306b95597699789cd9d1eeb89623ce">CCharacterController::setRadius()</a> - Sets the distance that determines how far away is the capsule's surface from its center line.</li>
<li><a class="el" href="classbs_1_1_c_character_controller.html#ae496067e87889651910ef9aa76293104">CCharacterController::setUp()</a> - Sets the direction of the center line.</li>
</ul>
<p>When setting the capsule shape, make sure it covers your character model. But without making it too large so there isn't a lot of empty space in order to prevent unrealistic collisions in which the capsule shape collides with an object, but the visible model doesn't.</p>
<div class="fragment"><div class="line"><span class="comment">// Make a capsule pointing straight up, with a total height of 1.8 units (e.g. meters) and width/depth of 0.8 units</span></div><div class="line">charController-&gt;setHeight(1.0f);</div><div class="line">charController-&gt;setRadius(0.4f);</div><div class="line">charController-&gt;setUp(Vector3::UNIT_Y);</div></div><!-- fragment --><h1><a class="anchor" id="characterController_b"></a>
Movement</h1>
<p>Similar to a rigidbody, when needing to move the controller you should use a specialized <a class="el" href="classbs_1_1_c_character_controller.html#aab5ffffc364577579b630e9a6938d0e5">CCharacterController::move()</a> method instead of the movement methods available on the scene object. Unlike with <b>Rigidbody</b>, this <em>move()</em> method takes as a parameter a displacement determining how much to move from the current position, unlike <b>Rigidbody</b> whose <em>move()</em> method takes absolute coordinates.</p>
<div class="fragment"><div class="line"><span class="comment">// Move 1 unit forward for every frame while W key is pressed</span></div><div class="line"><span class="keywordflow">if</span>(<a class="code" href="group___input.html#ga0a3fe5b5d0b802f8321e47000df19318">gInput</a>().isButtonHeld(BC_W))</div><div class="line">    charController-&gt;move(Vector3(0, 0, 1.0f));</div></div><!-- fragment --><p><b>CCharacterController::move()</b> will perform the movement immediately, unlike most other physics objects which only move every physics "tick". This also means any collisions can be reported immediately, which is done by the return value of <b>CCharacterController::move()</b>. The return value is of type <a class="el" href="group___physics.html#ga208c0c21d818df5b7b10ead40498ebf1">CharacterCollisionFlags</a> and can be used to tell if the controller collided with anything, and if it has, whether it was on its sides, its top or its bottom (or a combination of these).</p>
<p>This is similar to collision events reported by colliders and rigidbodies, but as the controller move is executely immediately its collision is also reported right away, meaning you can respond to the event with no delay so there is less input latency (which is important for objects controlled directly by the player).</p>
<p>Unlike with <b>Rigidbody</b> rotation must be handled through the scene object. Such rotation will not properly physically interact with the environment.</p>
<h1><a class="anchor" id="characterController_c"></a>
Slopes</h1>
<p>Character controller has the ability to limit what is the maximum slope it can be moved on. This is useful to prevent the game character from climbing unrealistically steep slopes. Use <a class="el" href="classbs_1_1_c_character_controller.html#a889d478a08c6121efa7e633b76670e43">CCharacterController::setSlopeLimit()</a> to set the maximum slope the controller is allowed to climb, in angles.</p>
<div class="fragment"><div class="line"><span class="comment">// Maximum slope of 45 degrees</span></div><div class="line">charController-&gt;setSlopeLimit(Degree(45));</div></div><!-- fragment --><p>Once the controller reaches the maximum slope the wanted behaviour can be:</p><ul>
<li>to stop the controller from moving any further</li>
<li>to stop the controller and have it slide down</li>
</ul>
<p>This behaviour can be controlled by calling <a class="el" href="classbs_1_1_c_character_controller.html#a8ec172b1b8ab966555a231fb04db5d9c">CCharacterController::setNonWalkableMode()</a>, which accepts a parameter of type <a class="el" href="group___physics.html#ga13f2d50fd8c0805d981415b1bc1ddb7b">CharacterNonWalkableMode</a>.</p>
<div class="fragment"><div class="line">charController-&gt;setNonWalkableMode(CharacterNonWalkableMode::PreventAndSlide);</div></div><!-- fragment --><h1><a class="anchor" id="characterController_d"></a>
Steps</h1>
<p>Controller can be also made to automatically climb on small steep obstacles, like stairs. Maximum height that the controller can step over is controlled by <a class="el" href="classbs_1_1_c_character_controller.html#a0fbb6d2a4f2a914e8adfe3f716c50653">CCharacterController::setStepOffset()</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Step over anything 0.15 units (e.g. 15cm) in height</span></div><div class="line">charController-&gt;setStepOffset(0.15f);</div></div><!-- fragment --><h1><a class="anchor" id="characterController_e"></a>
Events</h1>
<p>Similar to colliders, character controllers also report events when they collide with other objects. Use <a class="el" href="classbs_1_1_c_character_controller.html#a47f55cc93e2e7725de22ee984c3c86ce">CCharacterController::onColliderHit</a> to be notified when the controller hits a collider.</p>
<p>The value reported is <a class="el" href="structbs_1_1_controller_collider_collision.html">ControllerColliderCollision</a> which contains the position, normal and motion of a single contact point, as well as the reference to the collider that was hit.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> colliderHit = [](<span class="keyword">const</span> ControllerColliderCollision&amp; data)</div><div class="line">{</div><div class="line">    HCollider hitCollider = data.collider;</div><div class="line">    <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> hitSceneObjectName = hitCollider-&gt;SO()-&gt;getName();</div><div class="line"></div><div class="line">    Vector3 contactPoint = data.position;</div><div class="line">    <a class="code" href="group___debug.html#ga3d2df36e0b331304f012c778c43d86a9">gDebug</a>().<a class="code" href="classbs_1_1_debug.html#acb8d76b720a9ce83aff8bcef5340151b">logDebug</a>(<span class="stringliteral">&quot;Hit &quot;</span> + hitSceneObjectName + <span class="stringliteral">&quot; at point &quot;</span> + <a class="code" href="group___string.html#ga852e40fdd80b537b8ccf93e9cefe0e2b">toString</a>(contactPoint));</div><div class="line">};</div><div class="line"></div><div class="line">charController-&gt;onColliderHit.connect(colliderHit);</div></div><!-- fragment --><p>You can also receive events when the controller hits another controller by subscribing to <a class="el" href="classbs_1_1_c_character_controller.html#a655cd2c9f52e9b4abe80f58f07a8d29a">CCharacterController::onControllerHit</a>.</p>
<p>The value reported is <a class="el" href="structbs_1_1_controller_controller_collision.html">ControllerControllerCollision</a> which contains the position, normal and motion of a single contact point, as well as the reference to the other controller that was hit.</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> controllerHit = [](<span class="keyword">const</span> ControllerControllerCollision&amp; data)</div><div class="line">{</div><div class="line">    HCharacterController otherController = data.controller;</div><div class="line">    <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> otherSceneObjectName = otherController-&gt;SO()-&gt;getName();</div><div class="line"></div><div class="line">    Vector3 contactPoint = data.position;</div><div class="line">    <a class="code" href="group___debug.html#ga3d2df36e0b331304f012c778c43d86a9">gDebug</a>().<a class="code" href="classbs_1_1_debug.html#acb8d76b720a9ce83aff8bcef5340151b">logDebug</a>(<span class="stringliteral">&quot;Hit &quot;</span> + otherSceneObjectName + <span class="stringliteral">&quot; at point &quot;</span> + <a class="code" href="group___string.html#ga852e40fdd80b537b8ccf93e9cefe0e2b">toString</a>(contactPoint));</div><div class="line">};</div><div class="line"></div><div class="line">collider-&gt;onControllerHit.connect(controllerHit);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
