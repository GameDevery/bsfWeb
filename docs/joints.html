<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Joints</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Joints </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#joints_a">Basics</a></li>
<li class="level1"><a href="#joints_b">Joint types</a><ul><li class="level2"><a href="#joints_b_a">Fixed joint</a></li>
<li class="level2"><a href="#joints_b_b">Distance joint</a><ul><li class="level3"><a href="#joints_b_b_a">Limits</a></li>
<li class="level3"><a href="#joints_b_b_b">Spring</a></li>
<li class="level3"><a href="#joints_b_b_c">Tolerance</a></li>
<li class="level3"><a href="#joints_b_b_d">Current value</a></li>
</ul>
</li>
<li class="level2"><a href="#joints_b_c">Spherical joint</a><ul><li class="level3"><a href="#joints_b_c_a">Limits</a></li>
<li class="level3"><a href="#joints_b_c_b">Spring</a></li>
</ul>
</li>
<li class="level2"><a href="#joints_b_d">Slider joint</a><ul><li class="level3"><a href="#joints_b_d_a">Limits</a></li>
<li class="level3"><a href="#joints_b_d_b">Current value</a></li>
</ul>
</li>
<li class="level2"><a href="#joints_b_e">Hinge joint</a><ul><li class="level3"><a href="#joints_b_e_a">Limits</a></li>
<li class="level3"><a href="#joints_b_e_b">Drive</a></li>
<li class="level3"><a href="#joints_b_e_c">Current value</a></li>
</ul>
</li>
<li class="level2"><a href="#joints_b_f">D6 joint</a><ul><li class="level3"><a href="#joints_b_f_a">Degrees of freedom</a></li>
<li class="level3"><a href="#joints_b_f_b">Limits</a><ul><li class="level4"><a href="#joints_b_f_b_a">Linear limits</a></li>
<li class="level4"><a href="#joints_b_f_b_b">Twist limits</a></li>
<li class="level4"><a href="#joints_b_f_b_c">Swing limits</a></li>
</ul>
</li>
<li class="level3"><a href="#joints_b_f_c">Drives</a></li>
<li class="level3"><a href="#joints_b_f_d">Current value</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#joints_c">Joint breaking</a></li>
<li class="level1"><a href="#joints_d">Joint collisions</a></li>
</ul>
</div>
<div class="textblock"><p>Joints allow you to constrain movement of two rigidbodies in some way. A typical example would be a door hinge.</p>
<p>bs::f supports six different joint types:</p><ul>
<li>Fixed - Locks origins and orientations together</li>
<li>Distance - Keeps origins within a certain distance range</li>
<li>Spherical - Keeps origins together but allows rotation with no restrictions (also known as ball-and-socket joint)</li>
<li>Hinge - Keeps origins together but allows rotation around X axis</li>
<li>Slider - Keeps orientations together but allows movement on the X axis</li>
<li>D6 - Fully customizable joint type that can be used for implementing all previously mentioned joints, as well as configure new types</li>
</ul>
<p>All joints are components derived from <a class="el" href="classbs_1_1_c_joint.html">Joint</a>. Before we talk about individual joint types, lets cover the functionality shared by all joints.</p>
<h1><a class="anchor" id="joints_a"></a>
Basics</h1>
<p>All joints require two bodies to influence. You can also choose to specify <em>null</em> for one of the bodies, in which case the other body is assumed to move relative to an immovable reference frame. Note that at least one body attached to a joint must be movable.</p>
<p>To assign bodies to a joint call <a class="el" href="classbs_1_1_c_joint.html#aba0e618bd459d98bfccb6fdd9645fee6">CJoint::setBody()</a>. The method accepts a <a class="el" href="group___physics.html#gaa2c508bb9daf895981982999fa9b818b">JointBody</a> parameter specifiying which of the two bodies two assign the value to, and a <b>Rigidbody</b> component representing the body (or null).</p>
<div class="fragment"><div class="line"><span class="comment">// Create a rigidbody to manipulate with the joint</span></div><div class="line">HSceneObject rigidbodySO = SceneObject::create(<span class="stringliteral">&quot;Rigidbody&quot;</span>);</div><div class="line">HRigidbody rigidbody = rigidbodySO-&gt;addComponent&lt;CRigidbody&gt;();</div><div class="line"></div><div class="line">HBoxCollider boxCollider = rigidbodySO-&gt;addComponent&lt;CBoxCollider&gt;();</div><div class="line">boxCollider-&gt;setExtents(Vector3(0.5f, 0.5f, 0.5f));</div><div class="line"></div><div class="line"><span class="comment">// Add a fixed joint (covered later)</span></div><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HJoint joint = jointSO-&gt;addComponent&lt;CFixedJoint&gt;();</div><div class="line"></div><div class="line"><span class="comment">// Move the body so its not at the same position as the joint</span></div><div class="line">rigidbodySO-&gt;setPosition(Vector3(0, 5, 0));</div><div class="line"></div><div class="line"><span class="comment">// Add a body to the joint. Since we didn&#39;t add a second body this one will be anchored to an immovable reference frame</span></div><div class="line">joint-&gt;<a class="code" href="classbs_1_1_c_joint.html#aba0e618bd459d98bfccb6fdd9645fee6">setBody</a>(JointBody::Target, rigidbody);</div><div class="line"></div><div class="line"><span class="comment">// This joint will now ensure the origins and orientations of the rigidbody and joint remain constant. In this particular case since we attached the body to an immovable reference frame using a fixed joint, we have made the body immovable.</span></div></div><!-- fragment --><h1><a class="anchor" id="joints_b"></a>
Joint types</h1>
<h2><a class="anchor" id="joints_b_a"></a>
Fixed joint</h2>
<p>Fixed joints are the simplest joint types. As the name implies they fix the origins and orientations of two bodies together. For example imagine two wheels welded together with a metal bar - when one rotates so must the other, and when one moves so must the other.</p>
<p>TODO_IMAGE</p>
<p>They are represented with the <a class="el" href="classbs_1_1_c_fixed_joint.html">FixedJoint</a> component.They don't allow any additional properties to be set, aside from the bodies to influence.</p>
<div class="fragment"><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HFixedJoint joint = jointSO-&gt;addComponent&lt;CFixedJoint&gt;();</div></div><!-- fragment --><h2><a class="anchor" id="joints_b_b"></a>
Distance joint</h2>
<p>Distance joint simply keeps two bodies together at the specified distance range. You can specify a minimum and a maximum distance, as well as a spring property that makes the objects spring back or forth as they reach the range limits. For example you might use this joint type to model a rope.</p>
<p>TODO_IMAGE</p>
<p>Distance joints are represented using the <a class="el" href="classbs_1_1_c_distance_joint.html">DistanceJoint</a> component.</p>
<div class="fragment"><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HDistanceJoint joint = jointSO-&gt;addComponent&lt;CDistanceJoint&gt;();</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_b_a"></a>
Limits</h3>
<p>To specify the distance range call <a class="el" href="classbs_1_1_c_distance_joint.html#aac5abdf006e23aa57194482fa4341d57">CDistanceJoint::setMinDistance()</a> and <a class="el" href="classbs_1_1_c_distance_joint.html#ac3955fd75950a56eded0b061ef52c928">CDistanceJoint::setMaxDistance()</a>.</p>
<p>You must also explicitly enable the distance limits by calling <a class="el" href="classbs_1_1_c_distance_joint.html#a1c3caf338d19a2ff8a9474a833d08a1d">CDistanceJoint::setFlag()</a> with <a class="el" href="group___physics.html#gga3c4800de7acceed2d6c1399c086f4d32a334b6577674b84a8854d5281a52e48b1">DistanceJointFlag::MinDistance</a> and <a class="el" href="group___physics.html#gga3c4800de7acceed2d6c1399c086f4d32a26566fa367c162fcc3c6639f66c6b611">DistanceJointFlag::MaxDistance</a> flags. This allows you to only enable one or another, in case no restrictions are needed in one extreme.</p>
<div class="fragment"><div class="line"><span class="comment">// Keep the bodies in between 5 and 20 units between each other</span></div><div class="line">joint-&gt;setMinDistance(5.0f);</div><div class="line">joint-&gt;setMaxDistance(20.0f);</div><div class="line"></div><div class="line"><span class="comment">// Enable the limits</span></div><div class="line">joint-&gt;setFlag(DistanceJointFlag::MinDistance, <span class="keyword">true</span>);</div><div class="line">joint-&gt;setFlag(DistanceJointFlag::MaxDistance, <span class="keyword">true</span>);</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_b_b"></a>
Spring</h3>
<p>By default when the objects reach the specified limits they will come to a dead stop. Generally it's more realistic to have them be pushed back towards valid range slowly, in which case you can apply a spring parameter by calling <a class="el" href="classbs_1_1_c_distance_joint.html#a661e02c77bcd438200ba89386ddd2dcd">CDistanceJoint::setSpring()</a>.</p>
<p>It accepts an object of type <a class="el" href="structbs_1_1_spring.html">Spring</a> which has two properties:</p><ul>
<li><a class="el" href="structbs_1_1_spring.html#af34c4108d36eddc2343ace4d8a002628">Spring::stiffness</a> - Determines the strength of the spring when greater than zero.</li>
<li><a class="el" href="structbs_1_1_spring.html#a99d817470e9063f458d39529c7c1724b">Spring::damping</a> - Determines the damping of the spring when greater than zero.</li>
</ul>
<p>You must also explicitly enable springs by calling <a class="el" href="classbs_1_1_c_distance_joint.html#a1c3caf338d19a2ff8a9474a833d08a1d">CDistanceJoint::setFlag()</a> with the <a class="el" href="group___physics.html#gga3c4800de7acceed2d6c1399c086f4d32a38008dd81c2f4d7985ecf6e0ce8af1d1">DistanceJointFlag::Spring</a> parameter.</p>
<div class="fragment"><div class="line"><a class="code" href="group___physics.html#gga3c4800de7acceed2d6c1399c086f4d32a38008dd81c2f4d7985ecf6e0ce8af1d1">Spring</a> spring(1.0f, 1.0f);</div><div class="line"></div><div class="line">joint-&gt;setSpring(spring);</div><div class="line">joint-&gt;setFlag(DistanceJointFlag::Spring, <span class="keyword">true</span>);</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_b_c"></a>
Tolerance</h3>
<p>To ensure springs have enough time to activate, so they can begin pushing back the object before it actually breaches the valid range, you can specify an additional tolerance parameter. This parameter adds a "buffer" on the inner edges of the valid range, at which the spring will activate.</p>
<p>Use <a class="el" href="classbs_1_1_c_distance_joint.html#a20db55f0cf2a6a92a87ae29d75474471">CDistanceJoint::setTolerance()</a> to set the tolerance. This property is only relevant if using the spring.</p>
<h3><a class="anchor" id="joints_b_b_d"></a>
Current value</h3>
<p>Sometimes it is useful to find out how much is the joint currently "stretched". Call <a class="el" href="classbs_1_1_c_distance_joint.html#a6bbc0eeaed5b6be4ddd49903bd9e327b">CDistanceJoint::getDistance()</a> to get the current distance between its two bodies.</p>
<h2><a class="anchor" id="joints_b_c"></a>
Spherical joint</h2>
<p>Spherical joint allows for a full range of rotations, while keeping the origins of the two bodies together. This allows you to create a ball-and-socket functionality, for example.</p>
<p>TODO_IMAGE</p>
<p>Spherical joint is represented with the <a class="el" href="classbs_1_1_c_spherical_joint.html">SphericalJoint</a> component.</p>
<div class="fragment"><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HSphericalJoint joint = jointSO-&gt;addComponent&lt;CSphericalJoint&gt;();</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_c_a"></a>
Limits</h3>
<p>You can limit the rotation along Y and Z axes by specifying the limit angles in <a class="el" href="structbs_1_1_limit_cone_range.html">LimitConeRange</a>. As the name implies the angles represent the cone in which rotation is valid.</p>
<p>You apply the limits by calling <a class="el" href="classbs_1_1_c_spherical_joint.html#a7f8f8511f3f2eda3e6c23f122ae845b2">CSphericalJoint::setLimit()</a>, and enabling the limit by calling <a class="el" href="classbs_1_1_c_spherical_joint.html#a03c93b1131e1482b626d859dce53110c">CSphericalJoint::setFlag()</a> with <a class="el" href="group___physics.html#ggab9fb410f1e292f59bd3d96c1260bb9a6a80d2677cf518f4d04320042f4ea6c146">SphericalJointFlag::Limit</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a 90 degree cone</span></div><div class="line">LimitConeRange limit;</div><div class="line">limit.yLimitAngle = Degree(90.0f);</div><div class="line">limit.zLimitAngle = Degree(90.0f);</div><div class="line"></div><div class="line">joint-&gt;setLimit(limit);</div><div class="line">joint-&gt;setFlag(SphericalJointFlag::Limit, <span class="keyword">true</span>);</div></div><!-- fragment --><p>Rotation around the X axis cannot be limited using this joint type and is always free.</p>
<h3><a class="anchor" id="joints_b_c_b"></a>
Spring</h3>
<p><b>LimitConeRange</b> also contains a <a class="el" href="structbs_1_1_limit_common.html#a6890c1209f18d7527b172e45a01a95a6">LimitConeRange::restitution</a> parameter, which has the same meaning as in <b>PhysicsMaterial</b>. If restitution is zero the body will just stop when it reaches the limit. If it is non-zero the object will bounce instead.</p>
<p>You can also specify as <b>Spring</b> parameter as <a class="el" href="structbs_1_1_limit_common.html#ae5337e99285a082398ed886fbb623087">LimitConeRange::spring</a>, which controls how is the body pulled back after the limit has been breached. Its values have the same meaning as we described earlier.</p>
<p>Finally, you can specify a contact distance parameter as <a class="el" href="structbs_1_1_limit_common.html#a7aaff8d62cb787eba1018363c2418414">LimitConeRange::contactDist</a>, which ensures springs have enough time to activate before the body goes past the valid range. This is similar to the tolerance value we talked about regarding distance joints.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a 90 degree cone, with a soft limit</span></div><div class="line">LimitConeRange limit;</div><div class="line">limit.yLimitAngle = Degree(90.0f);</div><div class="line">limit.zLimitAngle = Degree(90.0f);</div><div class="line"></div><div class="line">limit.restitution = 0.8f;</div><div class="line">limit.contactDist = -1.0f;</div><div class="line">limit.spring.stiffness = 1.0f;</div><div class="line">limit.spring.damping = 1.0f;</div><div class="line"></div><div class="line">joint-&gt;setLimit(limit);</div><div class="line">joint-&gt;setFlag(SphericalJointFlag::Limit, <span class="keyword">true</span>);</div></div><!-- fragment --><p>Note that all the joint types that are about to follow have these four properties in their <em>Limit</em> structures, so we won't talk about them any further.</p>
<h2><a class="anchor" id="joints_b_d"></a>
Slider joint</h2>
<p>As the name implies slider joint constrains the body movement to slide along a single axis (X axis in particular). No movement along other axes, or rotation is allowed. For example this could be used for modeling some kind of a piston moving up and down.</p>
<p>TODO_IMAGE</p>
<p>It is represented using the <a class="el" href="classbs_1_1_c_slider_joint.html">SliderJoint</a> component.</p>
<div class="fragment"><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HSliderJoint joint = jointSO-&gt;addComponent&lt;CSliderJoint&gt;();</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_d_a"></a>
Limits</h3>
<p><a class="el" href="structbs_1_1_limit_linear_range.html">LimitLinearRange</a> can be used to specify minimum and maximum allowed distance between the two bodies (similar to the distance joint).</p>
<p>You apply the limit by calling <a class="el" href="classbs_1_1_c_slider_joint.html#a99090d1215f7413c255b1552ca99b797">CSliderJoint::setLimit()</a>, and enable the limit by calling <a class="el" href="classbs_1_1_c_slider_joint.html#a63f3134a20e9db142180cec3880b59e2">CSliderJoint::setFlag()</a> with <a class="el" href="group___physics.html#ggab9fb410f1e292f59bd3d96c1260bb9a6a80d2677cf518f4d04320042f4ea6c146">SliderJointFlag::Limit</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a distance range [5, 20] units</span></div><div class="line">LimitLinearRange limit;</div><div class="line">limit.lower = 5.0f;</div><div class="line">limit.upper = 20.0f;</div><div class="line"></div><div class="line">joint-&gt;setLimit(limit);</div><div class="line">joint-&gt;setFlag(SliderJointFlag::Limit, <span class="keyword">true</span>);</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_d_b"></a>
Current value</h3>
<p>You can find out the current position of the slider by calling <a class="el" href="classbs_1_1_c_slider_joint.html#a5356168ba6a34ca5ea89d188014c67c9">CSliderJoint::getPosition()</a>, and the current speed of the slider by calling <a class="el" href="classbs_1_1_c_slider_joint.html#a5648b24750f5391d2e80cb74a41d66e2">CSliderJoint::getSpeed()</a>.</p>
<h2><a class="anchor" id="joints_b_e"></a>
Hinge joint</h2>
<p>Hinge joint contrains rotation around a single axis (X axis specifically). Rotation around other axes, or translation is not allowed. This can be used for modeling door hinges or similar behaviour.</p>
<p>TODO_IMAGE</p>
<p>It is represented using the <a class="el" href="classbs_1_1_c_hinge_joint.html">HingeJoint</a> component.</p>
<div class="fragment"><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HHingeJoint joint = jointSO-&gt;addComponent&lt;CHingeJoint&gt;();</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_e_a"></a>
Limits</h3>
<p><a class="el" href="structbs_1_1_limit_angular_range.html">LimitAngularRange</a> can be used to specify minimum and maximum allowed angle between the two bodies.</p>
<p>You apply the limit by calling <a class="el" href="classbs_1_1_c_hinge_joint.html#ae319430d5c5c1aff327c00fc9a35552a">CHingeJoint::setLimit()</a>, and enable the limit by calling <a class="el" href="classbs_1_1_c_hinge_joint.html#a4d54bb0d911171ab3e9fa67b1e59f2ae">CHingeJoint::setFlag()</a> with <a class="el" href="group___physics.html#ggab9fb410f1e292f59bd3d96c1260bb9a6a80d2677cf518f4d04320042f4ea6c146">HingeJointFlag::Limit</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a hinge that can swing a maximum of 90 degrees</span></div><div class="line">LimitAngularRange limit;</div><div class="line">limit.lower = Degree(0.0f);</div><div class="line">limit.upper = Degree(90.0f);</div><div class="line"></div><div class="line">joint-&gt;setLimit(limit);</div><div class="line">joint-&gt;setFlag(HingeJointFlag::Limit, <span class="keyword">true</span>);</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_e_b"></a>
Drive</h3>
<p>Drive is a special object of type <a class="el" href="group___physics.html#ggab9fb410f1e292f59bd3d96c1260bb9a6af2c6151d6c0d99f3666129b97e2100f5">HingeJoint::Drive</a> that can be assigned to a hinge joint, to make the joint move without external forces. For example if you wanted to make a propeller, you could set up a drive on the hinge joint so it keeps on spinning.</p>
<p>Drive can be assigned through <a class="el" href="classbs_1_1_c_hinge_joint.html#ad90ad452d6fcb3191b8897d6660cc73a">CHingeJoint::setDrive()</a>, and must be explicitly enabled by calling <b>CHingeJoint::setFlag()</b> with <a class="el" href="group___physics.html#ggab9fb410f1e292f59bd3d96c1260bb9a6af2c6151d6c0d99f3666129b97e2100f5">HingeJointFlag::Drive</a>.</p>
<p><b>HingeJointDrive</b> object has a few properties:</p><ul>
<li><a class="el" href="structbs_1_1_hinge_joint_drive.html#a7f7e4724cf57d59513b39c5ecc81adc8">HingeJointDrive::speed</a> - Speed at which the drive will try to spin at</li>
<li><a class="el" href="structbs_1_1_hinge_joint_drive.html#a12540d72abfbe9196444a0df01a21f0b">HingeJointDrive::forceLimit</a> - Optional maximum force the drive is allowed to apply</li>
<li><a class="el" href="structbs_1_1_hinge_joint_drive.html#a933ea3dc211779150b639a24ea14852f">HingeJointDrive::freeSpin</a> - If the joint ends up moving faster than the drive (due to an external force), the drive will try to break in order to bring it down to drive's speed. If you don't want that to happen enable free spin.</li>
<li><a class="el" href="structbs_1_1_hinge_joint_drive.html#af05c920118d00e2baf3afca8f721b968">HingeJointDrive::gearRatio</a> - Scales the velocity of the target body by this value.</li>
</ul>
<h3><a class="anchor" id="joints_b_e_c"></a>
Current value</h3>
<p>You can find out the current angle of the hinge by calling <a class="el" href="classbs_1_1_c_hinge_joint.html#a54d3097d42d5595865c51da27832c43f">CHingeJoint::getAngle()</a>, and the current angular speed of the joint by calling <a class="el" href="classbs_1_1_c_hinge_joint.html#a5648b24750f5391d2e80cb74a41d66e2">CHingeJoint::getSpeed()</a>.</p>
<h2><a class="anchor" id="joints_b_f"></a>
D6 joint</h2>
<p>D6 is the most complex, and the most customizable type of joint. It can be used to create all joint types we have talked about so far, and to configure new custom joint types.</p>
<p>It is represented using the <a class="el" href="classbs_1_1_d6_joint.html">D6Joint</a> component.</p>
<div class="fragment"><div class="line">HSceneObject jointSO = SceneObject::create(<span class="stringliteral">&quot;Joint&quot;</span>);</div><div class="line">HD6Joint joint = jointSO-&gt;addComponent&lt;CD6Joint&gt;();</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_f_a"></a>
Degrees of freedom</h3>
<p>The joint has six degrees of freedom as represented by the <a class="el" href="group___physics.html#gabba96a0c1e0a6925f52d9bbfcc61c5f2">D6JointAxis</a> enum:</p><ul>
<li>X - Movement on the X axis</li>
<li>Y - Movement on the Y axis</li>
<li>Z - Movement on the Z axis</li>
<li>Twist - Rotation around the X axis</li>
<li>SwingY - Rotation around the Y axis</li>
<li>SwingZ - Rotation around the Z axis</li>
</ul>
<p>Each of those degrees can be in one of three states as represented by <a class="el" href="group___physics.html#ga69d9416eb81b36730d8ad1eabc2474a5">D6JointMotion</a> enum:</p><ul>
<li>Free - Axis is not constrained at all</li>
<li>Locked - Axis is immovable</li>
<li>Limited - Axis is constrained according to the provided <em>Limit</em> object</li>
</ul>
<p>Rotational degrees of freedom are partitioned as <em>twist</em> and <em>swing</em>. Different effects can be achieved be unlocking different combinations of them:</p><ul>
<li>If a single degree of angular freedom is unlocked it should be the twist degree as it has extra options for that case (for example a hinge joint).</li>
<li>If both swing degrees are unlocked but twist is locked the result is a zero-twist joint.</li>
<li>If one swing and one twist degree of freedom are unlocked the result is a zero-swing joint (for example an arm attached at the elbow)</li>
<li>If all angular degrees of freedom are unlocked the result is the same as the spherical joint.</li>
</ul>
<p>You can lock/unlock different axes by calling <a class="el" href="classbs_1_1_c_d6_joint.html#a387d892906576502bcaa82a8e0325deb">CD6Joint::setMotion()</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Create an equivalent of a hinge joint</span></div><div class="line">joint-&gt;setMotion(D6JointAxis::X, D6JointMotion::Locked);</div><div class="line">joint-&gt;setMotion(D6JointAxis::Y, D6JointMotion::Locked);</div><div class="line">joint-&gt;setMotion(D6JointAxis::Z, D6JointMotion::Locked);</div><div class="line">joint-&gt;setMotion(D6JointAxis::Twist, D6JointMotion::Free);</div><div class="line">joint-&gt;setMotion(D6JointAxis::SwingY, D6JointMotion::Locked);</div><div class="line">joint-&gt;setMotion(D6JointAxis::SwingZ, D6JointMotion::Locked);</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_f_b"></a>
Limits</h3>
<p>Each degree of freedom can also have a set of limits that constrain it further.</p>
<h4><a class="anchor" id="joints_b_f_b_a"></a>
Linear limits</h4>
<p>For translational degrees of freedom you use the <a class="el" href="structbs_1_1_limit_linear.html">LimitLinear</a> object. It contains an extent representing the maximum allowed distance (zero being the minimum). This is similar to distance and slider joints, except the minimum distance is always assumed to be zero. One limit is applied to all translational degrees of freedom.</p>
<p>Call <a class="el" href="classbs_1_1_c_d6_joint.html#a3d4a252dbf60ae62896a9905b6d9e489">CD6Joint::setLimitLinear()</a> to apply the limit.</p>
<p>To enable the limit call <b>CD6Joint::setMotion()</b> with <b>D6JointMotion::Limited</b> flag for the relevant degree of freedom. You use this same approach to apply limits for all degrees of freedom.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a maximum distance of 20 units</span></div><div class="line">LimitLinear limit;</div><div class="line">limit.extent = 20.0f;</div><div class="line"></div><div class="line"><span class="comment">// Unlock movement along the x axis, with the specified limit</span></div><div class="line">joint-&gt;setLimitLinear(limit);</div><div class="line">joint-&gt;setMotion(D6Joint::Axis::X, D6Joint::Motion::Limited);</div></div><!-- fragment --><h4><a class="anchor" id="joints_b_f_b_b"></a>
Twist limits</h4>
<p>Use <b>LimitAngularRange</b> to define a limit for the twist degree of freedom. Call <a class="el" href="classbs_1_1_c_d6_joint.html#a9f08e1231a0325542b36ddf016df96e3">CD6Joint::setLimitTwist()</a> to apply the limit.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a hinge that can swing a maximum of 90 degrees</span></div><div class="line">LimitAngularRange limit;</div><div class="line">limit.lower = Degree(0.0f);</div><div class="line">limit.upper = Degree(90.0f);</div><div class="line"></div><div class="line">joint-&gt;setLimitTwist(limit);</div><div class="line">joint-&gt;setMotion(D6Joint::Axis::Twist, D6Joint::Motion::Limited);</div></div><!-- fragment --><h4><a class="anchor" id="joints_b_f_b_c"></a>
Swing limits</h4>
<p>Use <b>LimitConeRange</b> to define a limit for the two swing degrees of freedom. Call <a class="el" href="classbs_1_1_c_d6_joint.html#a834078fe40decbd3873f3eaef2bc1ead">CD6Joint::setLimitSwing()</a> to apply the limit.</p>
<div class="fragment"><div class="line"><span class="comment">// A limit representing a 90 degree cone</span></div><div class="line">LimitConeRange limit;</div><div class="line">limit.yLimitAngle = Degree(90.0f);</div><div class="line">limit.zLimitAngle = Degree(90.0f);</div><div class="line"></div><div class="line">joint-&gt;setLimitSwing(limit);</div><div class="line">joint-&gt;setMotion(D6Joint::Axis::SwingY, D6Joint::Motion::Limited);</div><div class="line">joint-&gt;setMotion(D6Joint::Axis::SwingZ, D6Joint::Motion::Limited);</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_f_c"></a>
Drives</h3>
<p>Each degree of freedom can optionally be assigned a drive, which applies either linear or angular force (depending on the degree of freedom).</p>
<p>You enable the drive for a specific degree of freedom by calling <a class="el" href="classbs_1_1_c_d6_joint.html#a7a7b566a406942a7edf9cf950c420c3a">CD6Joint::setDrive()</a>, and providing a parameter of type <a class="el" href="structbs_1_1_d6_joint_drive.html">D6JointDrive</a> and the type of drive <a class="el" href="group___physics.html#ga290b8996b22e0fd46f5c1c8529ed6c6c">D6JointDriveType</a>.</p>
<p>Supported drive types are all the degrees of freedom, as well as a special <a class="el" href="group___physics.html#gga290b8996b22e0fd46f5c1c8529ed6c6ca42052f3dc6b466b6132c1a1dd1f3c135">D6JointDriveType::SLERP</a> drive type that performs rotation along all three axes at once.</p>
<p><b>D6JointDrive</b> contains a set of properties:</p><ul>
<li><a class="el" href="structbs_1_1_d6_joint_drive.html#af34c4108d36eddc2343ace4d8a002628">D6JointDrive::stiffness</a> - Similar purpose as with string stiffness, except it is used for driving the object instead of stopping it.</li>
<li><a class="el" href="structbs_1_1_d6_joint_drive.html#a99d817470e9063f458d39529c7c1724b">D6JointDrive::damping</a> - Similar purpose as with string damping, except it is used for driving the object instead of stopping it.</li>
<li><a class="el" href="structbs_1_1_d6_joint_drive.html#a12540d72abfbe9196444a0df01a21f0b">D6JointDrive::forceLimit</a> - Maximum force the drive is allowed to apply</li>
<li><a class="el" href="structbs_1_1_d6_joint_drive.html#ac8a398cb4849d595a6227ce408a16a38">D6JointDrive::acceleration</a> - If true the drive will generate acceleration instead of forces. Acceleration drives are easier to tune as they account for the masses of the actors to which the joint is attached.</li>
</ul>
<p>Finally you must call both <a class="el" href="classbs_1_1_c_d6_joint.html#a514b970a10d35fdc5ee7d761b6091922">CD6Joint::setDriveTransform()</a> and <a class="el" href="classbs_1_1_c_d6_joint.html#aee398d2383ac7afdda7ceca67acb562d">CD6Joint::setDriveVelocity()</a>. These methods accept the wanted position and rotation, as well as wanted linear and angular velocity. Once set the drive will apply forces to move towards that position and velocity, depending on the other parameters specified in <b>D6JointDrive</b>.</p>
<div class="fragment"><div class="line"><span class="comment">// Enable drive moving in X direction</span></div><div class="line">D6JointDrive drive;</div><div class="line">drive.stiffness = 1.0f;</div><div class="line">drive.damping = 1.0f;</div><div class="line"></div><div class="line">joint-&gt;setDrive(D6Joint::DriveType::X, drive);</div><div class="line"></div><div class="line"><span class="comment">// Unlock the axis</span></div><div class="line">joint-&gt;setMotion(D6Joint::Axis::X, D6Joint::Motion::Free);</div><div class="line"></div><div class="line"><span class="comment">// Start the drive moving 50 units forward, at velocity of 1 unit per second</span></div><div class="line">joint-&gt;setDriveTransform(Vector3(0, 0, 50), Quaternion::IDENTITY);</div><div class="line">joint-&gt;setDriveVelocity(Vector3(0, 0, 1), Vector3(0, 0, 0));</div></div><!-- fragment --><h3><a class="anchor" id="joints_b_f_d"></a>
Current value</h3>
<p>You can find out the current angles of all the rotational degrees by calling <a class="el" href="classbs_1_1_c_d6_joint.html#a20393de04812d8b34c945448494d87e6">CD6Joint::getTwist()</a>, <a class="el" href="classbs_1_1_c_d6_joint.html#a7662edbb4085c48d89178c98e9f47be6">CD6Joint::getSwingY()</a> or <a class="el" href="classbs_1_1_c_d6_joint.html#abadd66bc0497cc233b1de36e7d4c917f">CD6Joint::getSwingZ()</a>.</p>
<h1><a class="anchor" id="joints_c"></a>
Joint breaking</h1>
<p>All joint types can be configured to break after a specific amount of force or torque is applied to them. Once a joint is broken it will no longer constrain the attached bodies.</p>
<p>To set the break force and torque call <a class="el" href="classbs_1_1_c_joint.html#ac42390c0f3cfb5ce28899a6a9b37527f">CJoint::setBreakForce()</a> and <a class="el" href="classbs_1_1_c_joint.html#a2d8b81f793146419c3a69a5ce306e1c2">CJoint::setBreakTorque()</a>.</p>
<p>You can also get notified when the joint is broken by subscribing to the <a class="el" href="classbs_1_1_c_joint.html#a535f94bef9886e819123bc7d026c0bbf">CJoint::onJointBreak</a> event.</p>
<div class="fragment"><div class="line"><span class="comment">// Break if force exceeds 500 units</span></div><div class="line">joint-&gt;setBreakForce(500.0f);</div><div class="line"></div><div class="line"><span class="keyword">auto</span> notify = []()</div><div class="line">{</div><div class="line">    <a class="code" href="group___debug.html#ga3d2df36e0b331304f012c778c43d86a9">gDebug</a>().<a class="code" href="classbs_1_1_debug.html#acb8d76b720a9ce83aff8bcef5340151b">logDebug</a>(<span class="stringliteral">&quot;Joint broken!&quot;</span>);</div><div class="line">};</div><div class="line"></div><div class="line">joint-&gt;onJointBreak.connect(notify);</div></div><!-- fragment --><h1><a class="anchor" id="joints_d"></a>
Joint collisions</h1>
<p>By default two bodies attached to the joint will collide with each other. You can disable this by calling <a class="el" href="classbs_1_1_c_joint.html#a6588e2989a59e1b22ecbd2799b898b66">CJoint::setEnableCollision()</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Disable collisions between two joint bodies</span></div><div class="line">joint-&gt;setEnableCollision(<span class="keyword">false</span>);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
