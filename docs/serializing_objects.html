<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120676613-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120676613-1');
</script>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Persisting data</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Persisting data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#serializingObjects_a">Creating the RTTI object</a></li>
<li class="level1"><a href="#serializingObjects_b">Member fields</a><ul><li class="level2"><a href="#serializingObjects_b_a">Arrays</a></li>
</ul>
</li>
<li class="level1"><a href="#serializingObjects_c">Using RTTI</a></li>
</ul>
</div>
<div class="textblock"><p>Often components will have data you will want to persist across application sessions (for example <b>Renderable</b> component needs to remember which <b>Mesh</b> and <b>Material</b> it references). This persistent data will be automatically saved when a scene is saved, and loaded along with the scene. This process is called data serialization.</p>
<p>In order to make an object serializable you need to set up a special interface that allows the system to query information about the object, retrieve and set its data. This interface is known as Run Time Type Information (RTTI). In this example we talk primarily about components, but the same interface can be used for resources and normal objects.</p>
<p>Any object that is serializable (and therefore provides RTTI information) must implement the <a class="el" href="classbs_1_1_i_reflectable.html">IReflectable</a> interface. If you are creating custom components or resources, <b>Component</b> and <b>Resource</b> base classes already derive from this interface so you don't need to specify it manually. The interface is simple, requiring you to implement two methods:</p><ul>
<li>RTTITypeBase* getRTTI() const;</li>
<li>static RTTITypeBase* getRTTIStatic();</li>
</ul>
<p>Implementations of these methods will return an object containing all RTTI for a specific class. In the rest of this manual we'll focus on explaning how to create a RTTI class implementation returned by these methods.</p>
<div class="fragment"><div class="line"><span class="comment">// IReflectable implementation for a component</span></div><div class="line"><span class="keyword">class </span>MyComponent : <span class="keyword">public</span> <a class="code" href="group___physics.html#gga7cb6db30c601dfbec9036428d0e49d33a2cb05e4bb7830be982f0922fed86b4cd">Component</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MyComponent(<span class="keyword">const</span> HSceneObject&amp; parent)</div><div class="line">        :<a class="code" href="group___physics.html#gga7cb6db30c601dfbec9036428d0e49d33a2cb05e4bb7830be982f0922fed86b4cd">Component</a>(parent)</div><div class="line">    {}</div><div class="line"></div><div class="line">    <span class="comment">// ...class members...</span></div><div class="line"></div><div class="line">    <span class="keyword">static</span> RTTITypeBase* getRTTIStatic()</div><div class="line">    { <span class="keywordflow">return</span> MyComponentRTTI::instance(); }</div><div class="line"></div><div class="line">    RTTITypeBase* getRTTI()<span class="keyword"> const override</span></div><div class="line"><span class="keyword">    </span>{ <span class="keywordflow">return</span> MyComponent::getRTTIStatic(); }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">// IReflectable implementation for a normal class</span></div><div class="line"><span class="keyword">class </span>MyClass : <span class="keyword">public</span> IReflectable</div><div class="line">{</div><div class="line">    <span class="comment">// ...class members...</span></div><div class="line"></div><div class="line">    <span class="keyword">static</span> RTTITypeBase* getRTTIStatic()</div><div class="line">    { <span class="keywordflow">return</span> MyClassRTTI::instance(); }</div><div class="line"></div><div class="line">    RTTITypeBase* getRTTI()<span class="keyword"> const override</span></div><div class="line"><span class="keyword">    </span>{ <span class="keywordflow">return</span> MyClass::getRTTIStatic(); }</div><div class="line">};</div></div><!-- fragment --><h1><a class="anchor" id="serializingObjects_a"></a>
Creating the RTTI object</h1>
<p>All RTTI objects must implement the <a class="el" href="classbs_1_1_r_t_t_i_type.html">RTTIType&lt;Type, BaseType, MyRTTIType&gt;</a> interface. The interface accepts three template parameters:</p><ul>
<li><em>Type</em> - Class of the object we're creating RTTI for (e.g. <em>MyClass</em> or <em>MyComponent</em> from example above)</li>
<li><em>BaseType</em> - Base type of the object we're creating RTTI for (e.g. <em>IReflectable</em> or <em>Component</em> from example above)</li>
<li><em>MyRTTIType</em> - Name of the RTTI class itself</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyClassRTTI : <span class="keyword">public</span> RTTIType&lt;MyClass, IReflectable, MyClassRTTI&gt;</div><div class="line">{</div><div class="line">    <span class="comment">// ...</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyComponentRTTI : <span class="keyword">public</span> RTTIType&lt;MyComponent, Component, MyComponentRTTI&gt;</div><div class="line">{</div><div class="line">    <span class="comment">// ...</span></div><div class="line">};</div></div><!-- fragment --><p>The RTTI object must at least implement the following methods:</p><ul>
<li><a class="el" href="classbs_1_1_r_t_t_i_type_base.html#a403ab4102ee9f00e7f3fbb40a37cae8a">RTTITypeBase::getRTTIName()</a> - Returns the name of the class the RTTI describes</li>
<li><a class="el" href="classbs_1_1_r_t_t_i_type_base.html#a1fa7aba6f5d86b9848a6af6f6d2f3d1e">RTTITypeBase::getRTTIId()</a> - Returns an identifier that uniquely identifies the class</li>
<li><a class="el" href="classbs_1_1_r_t_t_i_type_base.html#a41d9a994446489f8634ac77003afc7b6">RTTITypeBase::newRTTIObject()</a> - Creates a new empty instance of the class the RTTI describes</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">enum</span> TypeIds</div><div class="line">{</div><div class="line">    <span class="comment">// These numbers must be unique or the system will complain. Use numbers higher than 200000 to avoid conflicts with built-in types</span></div><div class="line">    TID_MyClass = 200000,</div><div class="line">    TID_MyComponent = 200001</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyClassRTTI : <span class="keyword">public</span> RTTIType&lt;MyClass, IReflectable, MyClassRTTI&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">const</span> <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a>&amp; getRTTIName()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keyword">static</span> <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> name = <span class="stringliteral">&quot;MyClass&quot;</span>;</div><div class="line">        <span class="keywordflow">return</span> name;</div><div class="line">    }</div><div class="line"></div><div class="line">    UINT32 getRTTIId()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> TID_MyClass;</div><div class="line">    }</div><div class="line"></div><div class="line">    SPtr&lt;IReflectable&gt; newRTTIObject()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> bs_shared_ptr_new&lt;MyClass&gt;();</div><div class="line">    }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyComponentRTTI : <span class="keyword">public</span> RTTIType&lt;MyComponent, Component, MyComponentRTTI&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">const</span> <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a>&amp; getRTTIName()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keyword">static</span> <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> name = <span class="stringliteral">&quot;MyComponent&quot;</span>;</div><div class="line">        <span class="keywordflow">return</span> name;</div><div class="line">    }</div><div class="line"></div><div class="line">    UINT32 getRTTIId()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> TID_MyComponent;</div><div class="line">    }</div><div class="line"></div><div class="line">    SPtr&lt;IReflectable&gt; newRTTIObject()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> GameObjectRTTI::createGameObject&lt;MyComponent&gt;();</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><blockquote class="doxtable">
<p>Note that when creating new instances of components within RTTI class, you must use <b>GameObjectRTTI::createGameObject&lt;T&gt;()</b> method, instead of just creating a normal shared pointer. </p>
</blockquote>
<p>This is the minimal amount of work you need to do in order to implement RTTI. The RTTI types above now describe the class type, but not any of its members. In order to actually have class data serialized, you also need to define member fields.</p>
<h1><a class="anchor" id="serializingObjects_b"></a>
Member fields</h1>
<p>Member fields give the RTTI type a way to access (retrieve and assign) data from various members in the class the RTTI type describes. Let's imagine our <em>MyComponent</em> class had a few data members: </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyComponent : <span class="keyword">public</span> <a class="code" href="group___physics.html#gga7cb6db30c601dfbec9036428d0e49d33a2cb05e4bb7830be982f0922fed86b4cd">Component</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    UINT32 myInt;</div><div class="line">    <span class="keywordtype">float</span> myFloat;</div><div class="line">    <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> myString;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line">};</div></div><!-- fragment --><p>Its field definition within the RTTI type would look like so: </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyComponentRTTI : <span class="keyword">public</span> RTTIType&lt;MyComponent, Component, MyComponentRTTI&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <a class="code" href="group___r_t_t_i.html#gab8e8acce6f16b1ccbd812ef554eabd72">BS_BEGIN_RTTI_MEMBERS</a></div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a>(myInt, 0)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a>(myFloat, 1)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a>(myString, 2)</div><div class="line">    <a class="code" href="group___r_t_t_i.html#gaac9cddd263f03da4f7180f09c1082fa4">BS_END_RTTI_MEMBERS</a></div><div class="line"></div><div class="line">    <span class="comment">// ... </span></div><div class="line">};</div></div><!-- fragment --><p>Field definition portion of the RTTI type always begins with the <a class="el" href="group___r_t_t_i.html#gab8e8acce6f16b1ccbd812ef554eabd72">BS_BEGIN_RTTI_MEMBERS</a> macro, and ends with the <a class="el" href="group___r_t_t_i.html#gaac9cddd263f03da4f7180f09c1082fa4">BS_END_RTTI_MEMBERS</a>.</p>
<p>The field members themselves are defined by calling macros starting with BS_RTTI_MEMBER_*. The macro expects the name of the field it describes, as well as a unique ID of the field. The suffix of the BS_RTTI_MEMBER_* macro depends on the type of the field being added. There are three different types:</p><ul>
<li><a class="el" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a> - Field containing basic data types like ints, floats, strings or other types that can be just trivially copied during serialization/deserialization.</li>
<li><a class="el" href="group___r_t_t_i.html#gaad59fcf7b0a063e510dd8055e29571a9">BS_RTTI_MEMBER_REFL</a> - Field containing objects deriving from <b>IReflectable</b> (i.e. classes that have RTTI). The main advantage of using <b>IReflectable</b> types over plain ones is that you are allowed to add or remove fields from <b>IReflectable</b>s RTTI type, and it wont break any data that was previously serialized. This is very important as you make changes to your components or resources, so you can still load previously saved data (e.g. imagine saving a level, changing a component, and then being unable to load the level). Plain types on the other hand must always keep the same structure, otherwise the serialized data will be broken.</li>
<li><a class="el" href="group___r_t_t_i.html#gaa62b0935cc5d822b27f54cc2636a8083">BS_RTTI_MEMBER_REFLPTR</a> - Fields containing pointers to objects deriving from <b>IReflectable</b>. Same as <b>BS_RTTI_MEMBER_REFL</b>, except that multiple fields can point to the same object. This ensures the object won't be serialized multiple times, wasting space and performance, and also ensures that the system can properly restore all references to the object when it's deserialized.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment">// Component definition with more complex field types</span></div><div class="line"><span class="keyword">class </span>MyComponent : <span class="keyword">public</span> <a class="code" href="group___physics.html#gga7cb6db30c601dfbec9036428d0e49d33a2cb05e4bb7830be982f0922fed86b4cd">Component</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    UINT32 myInt;</div><div class="line">    <span class="keywordtype">float</span> myFloat;</div><div class="line">    <a class="code" href="group___string.html#gad5ba86fc2c60a7dec2e22553e0bc20d3">String</a> myString;</div><div class="line">    SPtr&lt;MyClass&gt; myPtrClass;</div><div class="line">    MyClass myClass;</div><div class="line">    HRenderable renderable; <span class="comment">// Component handle</span></div><div class="line">    HMesh mesh; <span class="comment">// Resource handle</span></div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyComponentRTTI : <span class="keyword">public</span> RTTIType&lt;MyComponent, Component, MyComponentRTTI&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <a class="code" href="group___r_t_t_i.html#gab8e8acce6f16b1ccbd812ef554eabd72">BS_BEGIN_RTTI_MEMBERS</a></div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a>(myInt, 0)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a>(myFloat, 1)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga7a70edc53502ab790f0796941f242487">BS_RTTI_MEMBER_PLAIN</a>(myString, 2)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#gaa62b0935cc5d822b27f54cc2636a8083">BS_RTTI_MEMBER_REFLPTR</a>(myPtrClass, 3)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#gaad59fcf7b0a063e510dd8055e29571a9">BS_RTTI_MEMBER_REFL</a>(myClass, 4)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#gaad59fcf7b0a063e510dd8055e29571a9">BS_RTTI_MEMBER_REFL</a>(renderable, 5)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#gaad59fcf7b0a063e510dd8055e29571a9">BS_RTTI_MEMBER_REFL</a>(mesh, 6)</div><div class="line">    <a class="code" href="group___r_t_t_i.html#gaac9cddd263f03da4f7180f09c1082fa4">BS_END_RTTI_MEMBERS</a></div><div class="line"></div><div class="line">    <span class="comment">// ... </span></div><div class="line">};</div></div><!-- fragment --><blockquote class="doxtable">
<p>Note that component and resource handles are considered <b>IReflectable</b>, and are therefore serialized by using <b>BS_RTTI_MEMBER_REFL</b>. </p>
</blockquote>
<p>Each field must have an ID unique within the RTTI type. If you remove members from the RTTI type, you should not re-use their IDs for other members. Additionally, if the type of a specific field changes, you should assign it a new ID. The IDs allow the system to map previously serialized data to the current structure of the object.</p>
<h2><a class="anchor" id="serializingObjects_b_a"></a>
Arrays</h2>
<p>Array field types are also supported:</p><ul>
<li><a class="el" href="group___r_t_t_i.html#ga301fd8881543499ca3ed82fc98e24e94">BS_RTTI_MEMBER_PLAIN_ARRAY</a></li>
<li><a class="el" href="group___r_t_t_i.html#ga9048b3d3129ac0cb8380a018604afee4">BS_RTTI_MEMBER_REFL_ARRAY</a></li>
<li><a class="el" href="group___r_t_t_i.html#ga1d4cd69ef007b27720f5582cb7a98d5f">BS_RTTI_MEMBER_REFLPTR_ARRAY</a></li>
</ul>
<p>They perform the same function as their non-array counterparts, except the fields are expected to contain a <b>Vector&lt;T&gt;</b> instead of a single entry.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyComponent : <span class="keyword">public</span> <a class="code" href="group___physics.html#gga7cb6db30c601dfbec9036428d0e49d33a2cb05e4bb7830be982f0922fed86b4cd">Component</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">// ...</span></div><div class="line"></div><div class="line">    Vector&lt;UINT32&gt; myInts;</div><div class="line">    Vector&lt;SPtr&lt;MyClass&gt;&gt; myPtrClasses;</div><div class="line">    Vector&lt;HMesh&gt; meshes;</div><div class="line"></div><div class="line">    <span class="comment">// ...</span></div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyComponentRTTI : <span class="keyword">public</span> RTTIType&lt;MyComponent, Component, MyComponentRTTI&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <a class="code" href="group___r_t_t_i.html#gab8e8acce6f16b1ccbd812ef554eabd72">BS_BEGIN_RTTI_MEMBERS</a></div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga301fd8881543499ca3ed82fc98e24e94">BS_RTTI_MEMBER_PLAIN_ARRAY</a>(myInts, 0)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga1d4cd69ef007b27720f5582cb7a98d5f">BS_RTTI_MEMBER_REFLPTR_ARRAY</a>(myPtrClasses, 1)</div><div class="line">        <a class="code" href="group___r_t_t_i.html#ga9048b3d3129ac0cb8380a018604afee4">BS_RTTI_MEMBER_REFL_ARRAY</a>(meshes, 2)</div><div class="line">    <a class="code" href="group___r_t_t_i.html#gaac9cddd263f03da4f7180f09c1082fa4">BS_END_RTTI_MEMBERS</a></div><div class="line"></div><div class="line">    <span class="comment">// ... </span></div><div class="line">};</div></div><!-- fragment --><h1><a class="anchor" id="serializingObjects_c"></a>
Using RTTI</h1>
<p>Once the RTTI has been created, in most cases it will be used automatically. In the case of components it will be used when saving/loading a scene, and in the case of resources it will be used when saving/loading a resource. But for any other class you will want to know how to utilize it manually.</p>
<p>To manually serialize an object you can use the <a class="el" href="classbs_1_1_file_encoder.html">FileEncoder</a> class. Create the file encoder with a path to the output file, followed by a call to <a class="el" href="classbs_1_1_file_encoder.html#a71e3f32bee8babf639534924ffcfadd8">FileEncoder::encode()</a> with the object to encode as the parameter. The system will encode the provided object, as well as any other referenced <b>IReflectable</b> objects.</p>
<div class="fragment"><div class="line">SPtr&lt;IReflectable&gt; myObject = bs_shared_ptr_new&lt;MyClass&gt;();</div><div class="line"></div><div class="line">FileEncoder fe(<span class="stringliteral">&quot;Path\To\My\File.asset&quot;</span>);</div><div class="line">fe.encode(myObject.get());</div></div><!-- fragment --><p>Once ready to decode, create a <a class="el" href="classbs_1_1_file_decoder.html">FileDecoder</a> with the same file path. Then call <a class="el" href="classbs_1_1_file_decoder.html#a34c3cd79adb9a13523f182287420b89c">FileDecoder::decode()</a>.</p>
<div class="fragment"><div class="line">FileDecoder fd(<span class="stringliteral">&quot;Path\To\My\File.asset&quot;</span>);</div><div class="line">SPtr&lt;IReflectable&gt; myObjectCopy = fd.decode();</div></div><!-- fragment --><p>You can also encode/decode to/from memory by using <a class="el" href="classbs_1_1_memory_serializer.html">MemorySerializer</a>. </p><div class="fragment"><div class="line">SPtr&lt;IReflectable&gt; myObject = bs_shared_ptr_new&lt;MyClass&gt;();</div><div class="line"></div><div class="line">MemorySerializer ms;</div><div class="line">UINT32 size;</div><div class="line">UINT8* data = ms.encode(myObject.get(), size);</div><div class="line">SPtr&lt;IReflectable&gt; myObjectCopy2 = ms.decode(data, size);</div><div class="line"></div><div class="line"><a class="code" href="group___memory.html#ga0c82945f631c4a07c3085b3f79046a87">bs_free</a>(data);</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
