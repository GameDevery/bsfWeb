<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - Indirect lighting</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Indirect lighting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#indirectLighting_a">Sky lighting</a></li>
<li class="level1"><a href="#indirectLighting_b">Light probes</a><ul><li class="level2"><a href="#indirectLighting_b_a">Placing probes</a></li>
<li class="level2"><a href="#indirectLighting_b_b">Generic probe positioning</a></li>
<li class="level2"><a href="#indirectLighting_b_c">Rendering probes</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>When you set up a <b>Light</b> component, surfaces lit by that light will only be lit if the surface is directly in the light path. But in real world the light bounces off surfaces, providing lighting to surfaces that are not in a direct path to the light. Indirect lighting provides an additional way to add realism to your scene by accounting for that non-direct lighting.</p>
<p>Indirect lighting needs to be enabled through <b>RenderSettings::enableIndirectLighting</b> for the relevant <b>Camera</b>, as it is disabled by default.</p>
<h1><a class="anchor" id="indirectLighting_a"></a>
Sky lighting</h1>
<p>If you have set up a <b>Skybox</b> and enabled indirect lighting your scene will immediately receive indirect lighting from the skybox, no additional settings are required.</p>
<p>Note that you might want to tweak the HDR texture used by the skybox so it doesn't overpower normal lighting. This can happen because some cameras might record HDR values in non-physical units in which case sky might appear too bright or too dark, in which case analytical lights might appear over- or underpowered.</p>
<h1><a class="anchor" id="indirectLighting_b"></a>
Light probes</h1>
<p>When it comes to indoors you must follow a similar approach as with reflection probes. Again you don't want indoors to receive indirect lighting from the sky, and must therefore set up an additional component. This is done through <a class="el" href="classbs_1_1_c_light_probe_volume.html">LightProbeVolume</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Set up a light probe volume</span></div><div class="line">HSceneObject lightProbeVolumeSO = SceneObject::create(<span class="stringliteral">&quot;LightProbeVolume&quot;</span>);</div><div class="line">HLightProbeVolume lightProbeVolume = lightProbeVolumeSO-&gt;addComponent&lt;CLightProbeVolume&gt;();</div></div><!-- fragment --><p><b>LightProbeVolume</b> allows you to set up light probes over the scene. The light probes will record lighting information at their position, and nearby surfaces will then use that information for indirect lighting. If a camera is outside of a light probe volume it will fall back to sky lighting.</p>
<h2><a class="anchor" id="indirectLighting_b_a"></a>
Placing probes</h2>
<p>You generally want to place light probes wherever there is a major change in lighting. The probes are fairly cheap performance-wise, and dozens can be used per a single room.</p>
<p>To add a probe to the volume call <a class="el" href="classbs_1_1_c_light_probe_volume.html#aea924b304ea685970d26ea997f0301c2">CLightProbeVolume::addProbe()</a>. The method only requires you to provide a position at which to place the probe at. The position is relative to the <b>SceneObject</b> the volume is attached to.</p>
<div class="fragment"><div class="line"><span class="comment">// Register a couple of probes</span></div><div class="line">lightProbeVolume-&gt;addProbe(Vector3(0.0f, 1.0f, 0.0f)));</div><div class="line">lightProbeVolume-&gt;addProbe(Vector3(5.0f, 1.0f, 0.0f)));</div></div><!-- fragment --><h2><a class="anchor" id="indirectLighting_b_b"></a>
Generic probe positioning</h2>
<p>Note that when first created the volume will contain eight probes placed on the corners of a unit box, at the volume's location. You can call <a class="el" href="classbs_1_1_c_light_probe_volume.html#acc5dd525cef714bed7fc1e0d4fd8fc68">CLightProbeVolume::resize()</a> to change the size of the box for the eight probes. You can also increase the density in which case the probes will also be placed in-between the box corners, as a uniform grid. This is particularily useful if you do not feel like placing probes manually.</p>
<div class="fragment"><div class="line"><span class="comment">// Set up a probe volume using a uniform grid distribution of probes with a total of 50 probes</span></div><div class="line">AABox area(Vector3(-5, -5, -5), Vector3(5, 5, 5));</div><div class="line">Vector3I probeCount(5, 2, 5);</div><div class="line"></div><div class="line">lightProbeVolume-&gt;resize(area, probeCount);</div></div><!-- fragment --><h2><a class="anchor" id="indirectLighting_b_c"></a>
Rendering probes</h2>
<p>Once you have positioned the probes, you need to render them by calling <a class="el" href="classbs_1_1_c_light_probe_volume.html#ac35ca691f482467761a447d1f8cedff0">CLightProbeVolume::renderProbes()</a>. This will update the lighting information for all probes in a volume. You will want to do this any time you add/remove or move probes, or when the lighting environment changes.</p>
<div class="fragment"><div class="line"><span class="comment">// Update probes based on current scene</span></div><div class="line">lightProbeVolume-&gt;renderProbes();</div></div><!-- fragment --><p>The renderered probes will be saved with the component so you do not need to render them after scene load. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
