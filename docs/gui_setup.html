<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>bs::f docs - GUI setup</title>
<link rel="icon" type="image/png" href="logo.png">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href='http://fonts.googleapis.com/css?family=Lato:normal,bold|Cabin:normal,bold' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="../SemanticUI/semantic.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxystyle.css" rel="stylesheet" type="text/css"/>
<link href="../SemanticUI/semantic.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="everything">
	<div class="ui inverted vertical center aligned segment" id="menuSegment">
		<div class="ui container">
			<div class="ui inverted mainmenu menu">
				<a href="https://www.bsframework.io"><div class="item" id="logoItem"><img class="ui image" id="logo" src="logoHeader.png"></div></a>
				<div class="right menu">
					<a class="borderless item" href="https://www.bsframework.io">Home</a>
					<a class="item" href="https://www.bsframework.io/download.html">Download</a>
					<a class="item" href="https://discourse.bsframework.io">Community</a>
					<a class="active item" href="https://www.bsframework.io/docs/index.html">Documentation</a>
					<a class="item" href="https://github.com/gamefoundry/bsf"><i class="github icon"></i>GitHub</a>
				</div>
			</div>
		</div>
	</div>	
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">GUI setup </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#guiSetup_a">Transforming GUI</a></li>
<li class="level1"><a href="#guiSetup_b">Using a separate GUI camera</a></li>
</ul>
</div>
<div class="textblock"><p>All GUI elements in bs::f are handled by a <a class="el" href="classbs_1_1_c_g_u_i_widget.html">GUIWidget</a> component. Each such component must have an attached <b>Camera</b> component, which determines where will the rendered GUI elements be output.</p>
<p>The camera is created in the same way as we shown before, and you can in-fact use the same camera you use for normal scene rendering. GUI elements will not be affected by camera's position, orientation or projection properties - they might however be affected by the size of the camera's render target.</p>
<div class="fragment"><div class="line">SPtr&lt;RenderWindow&gt; primaryWindow = <a class="code" href="group___application-_engine.html#gac5ac20960426d36154b4e1dc3da22400">gApplication</a>().<a class="code" href="classbs_1_1_core_application.html#a51c7948ad67e8cd4ec53d242016b929d">getPrimaryWindow</a>();</div><div class="line"></div><div class="line">HSceneObject cameraSO = SceneObject::create(<span class="stringliteral">&quot;Camera&quot;</span>);</div><div class="line">HCamera camera = cameraSO-&gt;addComponent&lt;CCamera&gt;(primaryWindow);</div></div><!-- fragment --><p>And we create a <b>GUIWidget</b> the same as with any other component.</p>
<div class="fragment"><div class="line">HSceneObject guiSO = SceneObject::create(<span class="stringliteral">&quot;GUI&quot;</span>);</div><div class="line">HGUIWidget gui = guiSO-&gt;addComponent&lt;CGUIWidget&gt;(camera);</div></div><!-- fragment --><p>Before a widget is usable we must first assign it a <b>GUISkin</b>. A skin defines how is every element on this particular widget rendered (its texture(s), fonts, size, etc.). We'll talk about skins and styles in detail later, but for now it's enough to assign the built-in skin available from <b>BuiltinResources</b>.</p>
<div class="fragment"><div class="line">gui-&gt;setSkin(BuiltinResources::instance().getGUISkin());</div></div><!-- fragment --><p>You can now use the GUI widget to add GUI elements to it </p><div class="fragment"><div class="line"><span class="comment">// Shows the text &quot;Hello!&quot; on the screen</span></div><div class="line">GUIPanel* mainPanel = gui-&gt;getPanel();</div><div class="line">mainPanel-&gt;addElement(GUILabel::create(HString(<span class="stringliteral">&quot;Hello!&quot;</span>)));</div><div class="line"></div><div class="line"><span class="comment">// ... add more elements ...</span></div></div><!-- fragment --><p>Don't worry about what <b>GUIPanel</b> or <b>GUILabel</b> mean at this time, we'll talk about GUI panels, elements and layouts in later chapters.</p>
<h1><a class="anchor" id="guiSetup_a"></a>
Transforming GUI</h1>
<p>Once you have set up a <b>GUIWidget</b> component, you can transform it using its scene object as normal. This allows you to apply 3D transformations to GUI elements, which can be useful for various interesting effects, including rendering GUI to in-game surfaces (like on a screen of an in-game 3D monitor).</p>
<div class="fragment"><div class="line"><span class="comment">// Rotate 30 degrees around the Z axis</span></div><div class="line">Quaternion rotate(Vector3::UNIT_Z, Degree(30.0f));</div><div class="line">guiSO-&gt;setRotation(rotate);</div></div><!-- fragment --><p>TODO_IMAGE</p>
<h1><a class="anchor" id="guiSetup_b"></a>
Using a separate GUI camera</h1>
<p>In the example above we have asssumed you will use the same camera for GUI as you use for scene rendering. However sometimes it is useful to have a separate camera for GUI, or even multiple separate cameras. In such case camera creation is mostly the same, but with some additional options that need to be enabled.</p>
<p>Initial creation of the camera is identical, we just choose a render target:</p>
<div class="fragment"><div class="line">SPtr&lt;RenderWindow&gt; primaryWindow = <a class="code" href="group___application-_engine.html#gac5ac20960426d36154b4e1dc3da22400">gApplication</a>().<a class="code" href="classbs_1_1_core_application.html#a51c7948ad67e8cd4ec53d242016b929d">getPrimaryWindow</a>();</div><div class="line"></div><div class="line">HSceneObject guiCameraSO = SceneObject::create(<span class="stringliteral">&quot;GUI camera&quot;</span>);</div><div class="line">HCamera guiCamera = guiCameraSO-&gt;addComponent&lt;CCamera&gt;(primaryWindow);</div></div><!-- fragment --><p>In order to prevent the camera from rendering scene objects, we enable the <b>RenderSettings::overlayOnly</b> property on the camera's <b>RenderSettings</b> object. </p><div class="fragment"><div class="line"><span class="keyword">auto</span> rs = guiCamera-&gt;getRenderSettings();</div><div class="line">rs-&gt;overlayOnly = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">guiCamera-&gt;setRenderSettings(rs);</div></div><!-- fragment --><p>Now our camera will render just overlay objects (GUI and sprites), and nothing else.</p>
<p>Next, we want to prevent the camera from clearing the render target. By default cameras will set all the pixels in the render target to some default value before they start rendering, every frame. We want our GUI camera to just render on top of anything rendered by the scene camera, so we disable that functionality by retrieving a <a class="el" href="classbs_1_1_viewport.html">Viewport</a> from the camera.</p>
<p><b>Viewport</b> is retrieved by calling <a class="el" href="classbs_1_1_c_camera.html#a761d6464da1aa9c85a5bfc65316eb271">CCamera::getViewport()</a>. It allows you to set if the render target is cleared through <a class="el" href="classbs_1_1_viewport_base.html#a1a2fe426af684262644cf0e260405689">Viewport::setClearFlags()</a> by providing the ClearFlagBits::Empty flag.</p>
<div class="fragment"><div class="line">SPtr&lt;Viewport&gt; viewport = guiCamera-&gt;getViewport();</div><div class="line"></div><div class="line"><span class="comment">// Disable clear for color, depth and stencil buffers</span></div><div class="line">viewport-&gt;setClearFlags(ClearFlagBits::Empty);</div></div><!-- fragment --><p>You can also use the viewport to control onto which portion of the render target should the camera render to. By default it will output to the entire render target but you can change the area by calling <a class="el" href="classbs_1_1_viewport_base.html#a2bf1afdcac1002ca214345f7801381e1">Viewport::setArea()</a>.</p>
<p>At this point you can use the camera to create a <b>GUIWidget</b> and use the GUI as normal. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.10-->
<!-- start footer part -->
    <!-- Footer -->
    <div class="myFooter">
		<div class="ui inverted vertical footer segment" style="border-top: 2px solid #f9500d;">
			<div class="ui container">
				<div class="ui stackable inverted divided equal height grid">
					<div class="three wide column">
						<h4 class="ui inverted header">Contact</h4>
						<div class="ui inverted link list">
							<a href="mailto:contact@bsframework.io" class="item">Contact us</a>
							<a href="https://github.com/GameFoundry/bsf/issues" target="_blank" class="item">Report an issue</a>
						</div>
					</div>
					<div class="three wide column">
						<h4 class="ui inverted header">Info</h4>
						<div class="ui inverted link list">
							<a href="https://github.com/GameFoundry/bsf" target="_blank" class="item">Contribute</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/Documentation/GitHub/roadmap.md" target="_blank" class="item">Roadmap</a>
							<a href="https://github.com/GameFoundry/bsf/blob/master/LICENSE.md" target="_blank" class="item">License</a>
						</div>
					</div>
					<div class="seven wide column">
						<h4 class="ui inverted header">Donate</h4>
						<div class="ui horizontal list">
							<div class="item"><a href="https://www.patreon.com/bsf"><img class="ui image" src="become_a_patron_button.png"></a></div>
							<div class="item"><a href="https://www.paypal.me/MarkoPintera/10" target="_blank"><img class="ui image" src="paypalDonate.png"></a></div>
						</div>
						<p style="padding-top:7px"><i>bs::f</i> is developed by Marko Pintera and contributors.</p>
					</div>
				</div>
			</div>
		</div>
	</div>
</div> <!-- Everything -->
</body>
</html>
